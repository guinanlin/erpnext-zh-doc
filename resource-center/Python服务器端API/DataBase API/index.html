<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-resource-center docs-doc-id-Python服务器端API/DataBase API" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Database API | ERPNext中文文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://erpnext.cc/resource-center/Python服务器端API/DataBase API"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-resource-center-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-resource-center-current"><meta data-rh="true" property="og:title" content="Database API | ERPNext中文文档"><meta data-rh="true" name="description" content="frappe.db.get_list"><meta data-rh="true" property="og:description" content="frappe.db.get_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://erpnext.cc/resource-center/Python服务器端API/DataBase API"><link data-rh="true" rel="alternate" href="https://erpnext.cc/resource-center/Python服务器端API/DataBase API" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://erpnext.cc/resource-center/Python服务器端API/DataBase API" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ERPNext中文文档 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ERPNext中文文档 Atom Feed">










<script src="https://hm.baidu.com/hm.js?9deb98a7ea2451b673fb3cfc9f0cc4e0" async></script>
<script src="https://erpnext.cc/js/chatbase.js" async></script>
<script src="https://www.chatbase.co/embed.min.js" id="5ZWhYlnG8H1dlLUbw4pjj" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.600016a7.css">
<link rel="preload" href="/assets/js/runtime~main.4421ee44.js" as="script">
<link rel="preload" href="/assets/js/main.409f1665.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">首页</b></a><a class="navbar__item navbar__link" href="/docs/V14/">官方文档</a><a class="navbar__item navbar__link" href="/resource/">实施交付</a><a class="navbar__item navbar__link" href="/best-practice/">最佳实践</a><a class="navbar__item navbar__link" href="/business-finance-all-in-one/">业财融合</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/resource-center/">资源中心</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">理论知识</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/computer-security/">计算机安全</a></li><li><a class="dropdown__link" href="/mes/">企业Mes系统</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="index" href="/docs/V14/">V14</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/V14/">V14</a></li><li><a class="dropdown__link" href="/docs/V13/intro">V13</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>首页</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resource-center/">资源中心</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/资源索引/财务资源索引">资源索引</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/培训/培训大纲">培训</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/JS 客户端API/From表单脚本">JS 客户端API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/resource-center/Python服务器端API/Document API">Python服务器端API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/resource-center/Python服务器端API/Document API">Document API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/resource-center/Python服务器端API/DataBase API">Database API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/其他API/Frappe DataTabale API">其他API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/数据库ER图/CRM ER图">数据库ER图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/定制指引/Hooks">定制指引</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/工具/Chrome插件">工具</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Python服务器端API</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Database API</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Database API</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbget_list-">frappe.db.get_list<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-get-list" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbget_list-" class="hash-link" aria-label="frappedbget_list-的直接链接" title="frappedbget_list-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(doctype, filters, or_filters, fields, order_by, group_by, start, page_length)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Also aliased to <code>frappe.get_list</code></li></ul><p>Returns a list of records from a <code>doctype</code> table. ORM Wrapper for a <code>SELECT</code> query. <strong>Will also apply user permissions for the records for the session user. Only returns the document names if the <code>fields</code> keyword argument is not given.</strong> By default this method returns a list of <code>dict</code>s, but, you can pluck a particular field by giving the <code>pluck</code> keyword argument:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Employee&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[{&#x27;name&#x27;: &#x27;HR-EMP-00008&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;name&#x27;: &#x27;HR-EMP-00006&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;name&#x27;: &#x27;HR-EMP-00010&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;name&#x27;: &#x27;HR-EMP-00005&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># with pluck</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Employee&#x27;, pluck=&#x27;name&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;HR-EMP-00008&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &#x27;HR-EMP-00006&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &#x27;HR-EMP-00010&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &#x27;HR-EMP-00005&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Combining filters and other arguments:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Task&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filters={</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;status&#x27;: &#x27;Open&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields=[&#x27;subject&#x27;, &#x27;date&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_by=&#x27;date desc&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start=10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page_length=20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    as_list=True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">((&#x27;Update Branding and Design&#x27;, &#x27;2019-09-04&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&#x27;Missing Documentation&#x27;, &#x27;2019-09-02&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&#x27;Fundraiser for Foundation&#x27;, &#x27;2019-09-03&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tasks with date after 2019-09-08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Task&#x27;, filters={</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;date&#x27;: [&#x27;&gt;&#x27;, &#x27;2019-09-08&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tasks with date between 2020-04-01 and 2021-03-31 (both inclusive)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Task&#x27;, filters=[[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;date&#x27;, &#x27;between&#x27;, [&#x27;2020-04-01&#x27;, &#x27;2021-03-31&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tasks with subject that contains &quot;test&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Task&#x27;, filters={</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;subject&#x27;: [&#x27;like&#x27;, &#x27;%test%&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Count number of tasks grouped by status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_list(&#x27;Task&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields=[&#x27;count(name) as count&#x27;, &#x27;status&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    group_by=&#x27;status&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[{&#x27;count&#x27;: 1, &#x27;status&#x27;: &#x27;Working&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;count&#x27;: 2, &#x27;status&#x27;: &#x27;Overdue&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;count&#x27;: 2, &#x27;status&#x27;: &#x27;Open&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;count&#x27;: 1, &#x27;status&#x27;: &#x27;Filed&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;count&#x27;: 20, &#x27;status&#x27;: &#x27;Completed&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> {&#x27;count&#x27;: 1, &#x27;status&#x27;: &#x27;Cancelled&#x27;}]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbget_all-">frappe.db.get_all<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-get-all" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbget_all-" class="hash-link" aria-label="frappedbget_all-的直接链接" title="frappedbget_all-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_all(doctype, filters, or_filters, fields, order_by, group_by, start, page_length)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Also aliased to <code>frappe.get_all</code></li></ul><p>Same as <code>frappe.db.get_list</code> but will fetch all records without applying permissions.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbget_value-">frappe.db.get_value<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-get-value" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbget_value-" class="hash-link" aria-label="frappedbget_value-的直接链接" title="frappedbget_value-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_value(doctype, name, fieldname)` or `frappe.db.get_value(doctype, filters, fieldname)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Also aliased to <code>frappe.get_value</code> and <code>frappe.db.get_values</code></li></ul><p>Returns a document&#x27;s field value or a list of values.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># single value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subject = frappe.db.get_value(&#x27;Task&#x27;, &#x27;TASK00002&#x27;, &#x27;subject&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># multiple values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subject, description = frappe.db.get_value(&#x27;Task&#x27;, &#x27;TASK00002&#x27;, [&#x27;subject&#x27;, &#x27;description&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># as dict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task_dict = frappe.db.get_value(&#x27;Task&#x27;, &#x27;TASK00002&#x27;, [&#x27;subject&#x27;, &#x27;description&#x27;], as_dict=1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task_dict.subject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task_dict.description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># with filters, will return the first record that matches filters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subject, description = frappe.db.get_value(&#x27;Task&#x27;, {&#x27;status&#x27;: &#x27;Open&#x27;}, [&#x27;subject&#x27;, &#x27;description&#x27;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbget_single_value-">frappe.db.get_single_value<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-get-single-value" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbget_single_value-" class="hash-link" aria-label="frappedbget_single_value-的直接链接" title="frappedbget_single_value-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.get_single_value(doctype, fieldname)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Returns a field value from a Single DocType.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">timezone = frappe.db.get_single_value(&#x27;System Settings&#x27;, &#x27;timezone&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbset_value-">frappe.db.set_value<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-set-value" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbset_value-" class="hash-link" aria-label="frappedbset_value-的直接链接" title="frappedbset_value-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.set_value(doctype, name, fieldname, value)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Also aliased to <code>frappe.db.update</code></li></ul><p>Sets a field&#x27;s value in the database, does not call the ORM triggers but updates the modified timestamp (unless specified not to).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># update a field value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.set_value(&#x27;Task&#x27;, &#x27;TASK00002&#x27;, &#x27;subject&#x27;, &#x27;New Subject&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># update multiple values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.set_value(&#x27;Task&#x27;, &#x27;TASK00002&#x27;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;subject&#x27;: &#x27;New Subject&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;description&#x27;: &#x27;New Description&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># update without updating the `modified` timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.set_value(&#x27;Task&#x27;, &#x27;TASK00002&#x27;, &#x27;subject&#x27;, &#x27;New Subject&#x27;, update_modified=False)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>This method won&#x27;t call ORM triggers like <code>validate</code> and <code>on_update</code>. Use this method to update hidden fields or if you know what you are doing.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbexists-">frappe.db.exists<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-exists" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbexists-" class="hash-link" aria-label="frappedbexists-的直接链接" title="frappedbexists-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.exists(doctype, name)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Returns true if a document record exists.</p><p>Pass doctype and docname:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.exists(&quot;User&quot;, &quot;jane@example.org&quot;, cache=True)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pass a dict of filters including the <code>&quot;doctype&quot;</code> key:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.exists({&quot;doctype&quot;: &quot;User&quot;, &quot;full_name&quot;: &quot;Jane Doe&quot;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pass the doctype and a dict of filters:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.exists(&quot;User&quot;, {&quot;full_name&quot;: &quot;Jane Doe&quot;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbcount-">frappe.db.count<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-count" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbcount-" class="hash-link" aria-label="frappedbcount-的直接链接" title="frappedbcount-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.count(doctype, filters)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Returns number of records for a given <code>doctype</code> and <code>filters</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># total number of Task records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.count(&#x27;Task&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># total number of Open tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.count(&#x27;Task&#x27;, {&#x27;status&#x27;: &#x27;Open&#x27;})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbdelete-">frappe.db.delete<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-delete" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbdelete-" class="hash-link" aria-label="frappedbdelete-的直接链接" title="frappedbdelete-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.delete(doctype, filters)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Delete <code>doctype</code> records that match <code>filters</code>. This runs a DML command, which means it can be rolled back. If no filters specified, all the records of the doctype are deleted.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.delete(&quot;Route History&quot;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;modified&quot;: (&quot;&amp;lt;=&quot;, last_record_to_keep[0].modified),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;user&quot;: user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.delete(&quot;Error Log&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.delete(&quot;__Test Table&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may pass the doctype name or an internal table name. Conventionally, internal tables in Frappe are prefixed with <code>__</code>. The API follows this. The above commands run an unconditional <code>DELETE</code> query over tables <strong>tabError Log</strong> and <strong>__Test Table</strong>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbtruncate-">frappe.db.truncate<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-truncate" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbtruncate-" class="hash-link" aria-label="frappedbtruncate-的直接链接" title="frappedbtruncate-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.truncate(doctype)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Truncate a table in the database. This runs a DDL command <code>TRUNCATE TABLE</code>, a commit is triggered before the statement is executed. This action cannot be rolled back. You may want to use this for clearing out log tables periodically.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.truncate(&quot;Error Log&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.truncate(&quot;__Test Table&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above commands run a <code>TRUNCATE</code> query over tables <strong>tabError Log</strong> and <strong>__Test Table</strong>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbcommit-">frappe.db.commit<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-commit" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbcommit-" class="hash-link" aria-label="frappedbcommit-的直接链接" title="frappedbcommit-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.commit()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Commits current transaction. Calls SQL <code>COMMIT</code>.</p><blockquote><p>In most cases you don&#x27;t need to commit manually. Refer Frappe&#x27;s <a href="https://frappeframework.com/docs/user/en/api/database#database-transaction-model" target="_blank" rel="noopener noreferrer">Database transaction model</a> below.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbsavepoint-">frappe.db.savepoint<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-savepoint" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbsavepoint-" class="hash-link" aria-label="frappedbsavepoint-的直接链接" title="frappedbsavepoint-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.savepoint(save_point)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a named savepoint to which you can later roll back to.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbrollback-">frappe.db.rollback<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-rollback" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbrollback-" class="hash-link" aria-label="frappedbrollback-的直接链接" title="frappedbrollback-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.rollback()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Rollbacks current transaction. Calls SQL <code>ROLLBACK</code>.</p><blockquote><p>Frappe will automatically run <code>frappe.db.rollback()</code> if an exception is thrown during a Web Request of type <code>POST</code> or <code>PUT</code>. Use this if you have to rollback early in a transaction.</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.rollback(save_point=&quot;save_point_name&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Rollback to a specific savepoint instead rolling back full transactions. This rollback won&#x27;t undo changes done to filesytem and any other rollback watchers.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbsql-">frappe.db.sql<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-sql" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbsql-" class="hash-link" aria-label="frappedbsql-的直接链接" title="frappedbsql-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.sql(query, values, as_dict)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute an arbitrary SQL query. This may be useful for complex server side reports with join statements, adjusting the database to new features, etc.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">values = {&#x27;company&#x27;: &#x27;Frappe Technologies Inc&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data = frappe.db.sql(&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        acc.account_number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gl.debit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gl.credit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM `tabGL Entry` gl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LEFT JOIN `tabAccount` acc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ON gl.account = acc.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHERE gl.company = %(company)s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;, values=values, as_dict=0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Avoid using this method as it will bypass validations and integrity checks. It&#x27;s always better to use <a href="https://frappeframework.com/docs/v14/user/en/api/document#frappeget_doc" target="_blank" rel="noopener noreferrer">frappe.get_doc</a>, <a href="https://frappeframework.com/docs/user/en/api/database#frappedbget_list" target="_blank" rel="noopener noreferrer">frappe.db.get_list</a>, etc., if possible.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbmultisql-">frappe.db.multisql<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-multisql" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbmultisql-" class="hash-link" aria-label="frappedbmultisql-的直接链接" title="frappedbmultisql-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.multisql({&#x27;mariadb&#x27;: mariadb_query, &#x27;postgres&#x27;: postgres_query})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the suitable SQL statement for any supported database engine.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbrename_table-">frappe.db.rename_table<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-rename-table" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbrename_table-" class="hash-link" aria-label="frappedbrename_table-的直接链接" title="frappedbrename_table-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.rename_table(old_name, new_name)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Executes a query to change table name. Specify the DocType or internal table&#x27;s name directly to rename the table.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.rename_table(&quot;__internal_cache&quot;, &quot;__temporary_cache&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.rename_table(&quot;todo&quot;, &quot;ToDo&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The second example should be used only if you understand the ramifications of it.</p><blockquote><p>Don&#x27;t use this to rename DocType tables. Use <code>frappe.rename_doc</code> for that instead</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbdescribe-">frappe.db.describe<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-describe" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbdescribe-" class="hash-link" aria-label="frappedbdescribe-的直接链接" title="frappedbdescribe-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.describe(doctype)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Returns a tuple of the table description for given DocType.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbchange_column_type-">frappe.db.change_column_type<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-change-column-type" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbchange_column_type-" class="hash-link" aria-label="frappedbchange_column_type-的直接链接" title="frappedbchange_column_type-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.change_column_type(doctype, column, new_type)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Changes the type of column for specified DocType.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbadd_index-">frappe.db.add_index<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-add-index" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbadd_index-" class="hash-link" aria-label="frappedbadd_index-的直接链接" title="frappedbadd_index-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.add_index(doctype, fields, index_name)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Creates indexes for doctypes for the specified fields.</p><blockquote><p>Note: if you want an index on a TEXT or a BLOB field, you must specify a fixed length to do that.</p></blockquote><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.add_index(&quot;Notes&quot;, [&quot;id(10)&quot;, &quot;content(500)&quot;], index_name)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="frappedbadd_unique-">frappe.db.add_unique<a href="https://frappeframework.com/docs/user/en/api/database#frappe-db-add-unique" target="_blank" rel="noopener noreferrer"> </a><a href="#frappedbadd_unique-" class="hash-link" aria-label="frappedbadd_unique-的直接链接" title="frappedbadd_unique-的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.add_unique(doctype, fields, constraint_name=None)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Creates unique constraint for doctypes for the specified fields.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.db.add_unique(&quot;DoctypeName&quot;,[&quot;field1&quot;,&quot;field2&quot;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="database-transaction-hooks-">Database transaction hooks<a href="https://frappeframework.com/docs/user/en/api/database#database-transaction-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#database-transaction-hooks-" class="hash-link" aria-label="database-transaction-hooks-的直接链接" title="database-transaction-hooks-的直接链接">​</a></h2><blockquote><p>Note: This API is introduced in v15.</p></blockquote><p>Frappe provides hooks for running callbacks before/after transaction commands like commit/rollback are issued. These hooks are useful for:</p><ul><li>Rolling back changes that are done outside of the database if the transaction is rolled back</li><li>Flushing changes outside of the database only if the transaction is committed.</li></ul><p>These hooks are :</p><ul><li><code>frappe.db.before_commit.add(func: Callable)</code></li><li><code>frappe.db.after_commit.add(func: Callable)</code></li><li><code>frappe.db.before_rollback.add(func: Callable)</code></li><li><code>frappe.db.after_rollback.add(func: Callable)</code></li></ul><p>Example usage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def create_file(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.write_file()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # This ensures rollback if DB transaction is rolledback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    frappe.db.after_rollback.add(self.rollback_file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def rollback_file(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.delete_file()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="database-transaction-model-">Database transaction model<a href="https://frappeframework.com/docs/user/en/api/database#database-transaction-model" target="_blank" rel="noopener noreferrer"> </a><a href="#database-transaction-model-" class="hash-link" aria-label="database-transaction-model-的直接链接" title="database-transaction-model-的直接链接">​</a></h2><p>Frappe&#x27;s database abstractions implement a sane transaction model by default. So in most cases, you won&#x27;t have to deal with SQL transactions manually. A broad description of this model is described below:</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="web-requests-">Web requests<a href="https://frappeframework.com/docs/user/en/api/database#web-requests" target="_blank" rel="noopener noreferrer"> </a><a href="#web-requests-" class="hash-link" aria-label="web-requests-的直接链接" title="web-requests-的直接链接">​</a></h3><ul><li>While performing <code>POST</code> or <code>PUT</code>, if any writes were made to the database, they are committed at end of the successful request.</li><li>AJAX calls made using <code>frappe.call</code> are <code>POST</code> by default unless changed.</li><li><code>GET</code> requests do not cause an implicit commit.</li><li>Any <strong>uncaught</strong> exception during handling of request will rollback the transaction.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="backgroundscheduled-jobs-">Background/scheduled Jobs<a href="https://frappeframework.com/docs/user/en/api/database#background-scheduled-jobs" target="_blank" rel="noopener noreferrer"> </a><a href="#backgroundscheduled-jobs-" class="hash-link" aria-label="backgroundscheduled-jobs-的直接链接" title="backgroundscheduled-jobs-的直接链接">​</a></h3><ul><li>Calling a function as background or scheduled job will commit the transaction after successful completion.</li><li>Any <strong>uncaught</strong> exception will cause rollback of the transaction.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="patches-">Patches<a href="https://frappeframework.com/docs/user/en/api/database#patches" target="_blank" rel="noopener noreferrer"> </a><a href="#patches-" class="hash-link" aria-label="patches-的直接链接" title="patches-的直接链接">​</a></h3><ul><li>Successful completion of the patch&#x27;s <code>execute</code> function will commit the transaction automatically.</li><li>Any <strong>uncaught</strong> exception will cause rollback of the transaction.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unit-tests-">Unit tests<a href="https://frappeframework.com/docs/user/en/api/database#unit-tests" target="_blank" rel="noopener noreferrer"> </a><a href="#unit-tests-" class="hash-link" aria-label="unit-tests-的直接链接" title="unit-tests-的直接链接">​</a></h3><ul><li>Transaction is committed after running one test module. Test module means any python test file like <code>test_core.py</code>.</li><li>Transaction is also committed after finishing all tests.</li><li>Any <strong>uncaught</strong> exception will exit the test runner, hence won&#x27;t commit.</li></ul><blockquote><p>Note: If you&#x27;re catching exceptions anywhere, then database abstraction does not know that something has gone wrong hence you&#x27;re responsible for the correct rollback of the transaction.</p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/resource-center/Python服务器端API/Document API"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Document API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/resource-center/其他API/Frappe DataTabale API"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Frappe DataTable 配置</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#frappedbget_list-" class="table-of-contents__link toc-highlight">frappe.db.get_list </a></li><li><a href="#frappedbget_all-" class="table-of-contents__link toc-highlight">frappe.db.get_all </a></li><li><a href="#frappedbget_value-" class="table-of-contents__link toc-highlight">frappe.db.get_value </a></li><li><a href="#frappedbget_single_value-" class="table-of-contents__link toc-highlight">frappe.db.get_single_value </a></li><li><a href="#frappedbset_value-" class="table-of-contents__link toc-highlight">frappe.db.set_value </a></li><li><a href="#frappedbexists-" class="table-of-contents__link toc-highlight">frappe.db.exists </a></li><li><a href="#frappedbcount-" class="table-of-contents__link toc-highlight">frappe.db.count </a></li><li><a href="#frappedbdelete-" class="table-of-contents__link toc-highlight">frappe.db.delete </a></li><li><a href="#frappedbtruncate-" class="table-of-contents__link toc-highlight">frappe.db.truncate </a></li><li><a href="#frappedbcommit-" class="table-of-contents__link toc-highlight">frappe.db.commit </a></li><li><a href="#frappedbsavepoint-" class="table-of-contents__link toc-highlight">frappe.db.savepoint </a></li><li><a href="#frappedbrollback-" class="table-of-contents__link toc-highlight">frappe.db.rollback </a></li><li><a href="#frappedbsql-" class="table-of-contents__link toc-highlight">frappe.db.sql </a></li><li><a href="#frappedbmultisql-" class="table-of-contents__link toc-highlight">frappe.db.multisql </a></li><li><a href="#frappedbrename_table-" class="table-of-contents__link toc-highlight">frappe.db.rename_table </a></li><li><a href="#frappedbdescribe-" class="table-of-contents__link toc-highlight">frappe.db.describe </a></li><li><a href="#frappedbchange_column_type-" class="table-of-contents__link toc-highlight">frappe.db.change_column_type </a></li><li><a href="#frappedbadd_index-" class="table-of-contents__link toc-highlight">frappe.db.add_index </a></li><li><a href="#frappedbadd_unique-" class="table-of-contents__link toc-highlight">frappe.db.add_unique </a></li><li><a href="#database-transaction-hooks-" class="table-of-contents__link toc-highlight">Database transaction hooks </a></li><li><a href="#database-transaction-model-" class="table-of-contents__link toc-highlight">Database transaction model </a><ul><li><a href="#web-requests-" class="table-of-contents__link toc-highlight">Web requests </a></li><li><a href="#backgroundscheduled-jobs-" class="table-of-contents__link toc-highlight">Background/scheduled Jobs </a></li><li><a href="#patches-" class="table-of-contents__link toc-highlight">Patches </a></li><li><a href="#unit-tests-" class="table-of-contents__link toc-highlight">Unit tests </a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://frappeframework.com/docs/v14/user/en/introduction" target="_blank" rel="noopener noreferrer" class="footer__link-item">Frappe文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/V14/">中文文档</a></li><li class="footer__item"><a href="https://docs.erpnext.com/docs/user/manual/en/introduction" target="_blank" rel="noopener noreferrer" class="footer__link-item">英文文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">资源</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gitee.com/yuzelin/erpnext-chinese-docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">码云问题库<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discuss.frappe.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">官方社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://manual.buildwithhussain.dev/introduction/" target="_blank" rel="noopener noreferrer" class="footer__link-item">buildwithhussain<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">博客/代码</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://erpnext.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">ERPNext博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/frappe/erpnext" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tools.erpnext.cc" target="_blank" rel="noopener noreferrer" class="footer__link-item">it-tools<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 MIT </div></div></div></footer></div>
<script src="/assets/js/runtime~main.4421ee44.js"></script>
<script src="/assets/js/main.409f1665.js"></script>
</body>
</html>