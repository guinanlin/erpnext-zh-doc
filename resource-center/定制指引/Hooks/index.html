<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-resource-center docs-doc-id-定制指引/Hooks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Hooks | ERPNext中文文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://erpnext.cc/resource-center/定制指引/Hooks"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-resource-center-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-resource-center-current"><meta data-rh="true" property="og:title" content="Hooks | ERPNext中文文档"><meta data-rh="true" name="description" content="https://frappeframework.com/docs/user/en/python-api/hooks"><meta data-rh="true" property="og:description" content="https://frappeframework.com/docs/user/en/python-api/hooks"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://erpnext.cc/resource-center/定制指引/Hooks"><link data-rh="true" rel="alternate" href="https://erpnext.cc/resource-center/定制指引/Hooks" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://erpnext.cc/resource-center/定制指引/Hooks" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ERPNext中文文档 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ERPNext中文文档 Atom Feed">










<script src="https://hm.baidu.com/hm.js?9deb98a7ea2451b673fb3cfc9f0cc4e0" async></script>
<script src="https://erpnext.cc/js/chatbase.js" async></script>
<script src="https://www.chatbase.co/embed.min.js" id="5ZWhYlnG8H1dlLUbw4pjj" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.600016a7.css">
<link rel="preload" href="/assets/js/runtime~main.82cfa04e.js" as="script">
<link rel="preload" href="/assets/js/main.8224abd7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">首页</b></a><a class="navbar__item navbar__link" href="/docs/V14/">官方文档</a><a class="navbar__item navbar__link" href="/resource/">实施交付</a><a class="navbar__item navbar__link" href="/best-practice/">最佳实践</a><a class="navbar__item navbar__link" href="/business-finance-all-in-one/">业财融合</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/resource-center/">资源中心</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">理论知识</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/computer-security/">计算机安全</a></li><li><a class="dropdown__link" href="/mes/">企业Mes系统</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="index" href="/docs/V14/">V14</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/V14/">V14</a></li><li><a class="dropdown__link" href="/docs/V13/intro">V13</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>首页</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resource-center/">资源中心</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/资源索引/财务资源索引">资源索引</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/培训/培训大纲">培训</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/JS 客户端API/From表单脚本">JS 客户端API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/Python服务器端API/Document API">Python服务器端API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/其他API/Frappe DataTabale API">其他API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/数据库ER图/CRM ER图">数据库ER图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/resource-center/定制指引/Hooks">定制指引</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/resource-center/定制指引/Hooks">Hooks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/resource-center/工具/Chrome插件">工具</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">定制指引</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Hooks</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Hooks</h1><p><a href="https://frappeframework.com/docs/user/en/python-api/hooks" target="_blank" rel="noopener noreferrer">https://frappeframework.com/docs/user/en/python-api/hooks</a></p><p>Hooks allow you to &quot;hook&quot; into functionality and events of core parts of the Frappe Framework. This page documents all of the hooks provided by the framework.</p><blockquote><p>Jump to list of all <a href="https://frappeframework.com/docs/user/en/python-api/hooks#list-of-available-hooks" target="_blank" rel="noopener noreferrer">available hooks</a> in Frappe.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-does-hooks-work">How does hooks work?<a href="#how-does-hooks-work" class="hash-link" aria-label="How does hooks work?的直接链接" title="How does hooks work?的直接链接">​</a></h2><p>Hooks are places in the core code that allow an app to override the standard implementation or extend it. Hooks are defined in <strong>hooks.py</strong> of your app.</p><p>Let&#x27;s learn by example. Add the following hooks in your app&#x27;s <strong>hooks.py</strong>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">test_string = &quot;value&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_list = [&quot;value&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_dict = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key&quot;: &quot;value&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, open the python console by running the command <code>bench --site sitename console</code> and run the following lines:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ bench --site sitename console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apps in this namespace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frappe, frappe_docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In [1]: frappe.get_hooks(&quot;test_string&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Out[1]: [&quot;value&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In [2]: frappe.get_hooks(&quot;test_dict&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Out[2]: {&quot;key&quot;: [&quot;value&quot;]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In [3]: frappe.get_hooks(&quot;test_list&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Out[3]: [&quot;value&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When you call <code>frappe.get_hooks</code>, it will convert all the values in a list. This means that if the hook is defined in multiple apps, the values will be collected from those apps. This is what enables the cascading nature of hooks.</p><p>Now, the hook value can be consumed in different ways. For example, for including JS assets using <code>app_include_js</code>, all of the values are included. But for overriding whitelisted method, the last value in the list is used.</p><p>So the implementation of the hook is totally dependent on how the author of the feature intended it to be used.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-are-conflicting-hooks-resolved">How are conflicting hooks resolved?<a href="#how-are-conflicting-hooks-resolved" class="hash-link" aria-label="How are conflicting hooks resolved?的直接链接" title="How are conflicting hooks resolved?的直接链接">​</a></h2><p>Hooks are resolved using &quot;last writer wins&quot; strategy. Last installed app on site will have highest priority over others.</p><ul><li>When the hook overrides existing behaviour like overriding a class then only overrides from last app will work.</li><li>When the hook extends behaviour then extensions will be applied in order of installation on the site.</li></ul><p>&gt;<!-- --> If you need to change this order you can do so by going to &quot;Installed Applications&quot; page and clicking on &quot;Update Hooks Resolution Order&quot;</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="app-meta-data">App Meta Data<a href="#app-meta-data" class="hash-link" aria-label="App Meta Data的直接链接" title="App Meta Data的直接链接">​</a></h2><p>These are automatically generated when you create a new app. Most of the time you don&#x27;t need to change anything here.</p><ol><li><code>app_name</code> - slugified name of the app</li><li><code>app_title</code> - presentable app name</li><li><code>app_publisher</code></li><li><code>app_description</code></li><li><code>app_version</code></li><li><code>app_icon</code></li><li><code>app_color</code></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="javascript--css-assets">Javascript / CSS Assets<a href="#javascript--css-assets" class="hash-link" aria-label="Javascript / CSS Assets的直接链接" title="Javascript / CSS Assets的直接链接">​</a></h2><p>The following hooks allow you to inject static JS and CSS assets in various parts of your site.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="desk-">Desk<a href="https://frappeframework.com/docs/user/en/python-api/hooks#desk" target="_blank" rel="noopener noreferrer"> </a><a href="#desk-" class="hash-link" aria-label="desk-的直接链接" title="desk-的直接链接">​</a></h3><p>These hooks allow you to inject JS / CSS in <code>desk.html</code> which renders the <a href="https://frappeframework.com/docs/v14/user/en/desk" target="_blank" rel="noopener noreferrer">Desk</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># injected in desk.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app_include_js = &quot;assets/js/app.min.js&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app_include_css = &quot;assets/js/app.min.css&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># All of the above support a list of paths too</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app_include_js = [&quot;assets/js/app1.min.js&quot;, &quot;assets/js/app2.min.js&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="portal-">Portal<a href="https://frappeframework.com/docs/user/en/python-api/hooks#portal" target="_blank" rel="noopener noreferrer"> </a><a href="#portal-" class="hash-link" aria-label="portal-的直接链接" title="portal-的直接链接">​</a></h3><p>These hooks allow you to inject JS / CSS in <code>web.html</code> which renders the <a href="https://frappeframework.com/docs/v14/user/en/portal-pages" target="_blank" rel="noopener noreferrer">Portal</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># injected in the web.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web_include_js = &quot;assets/js/app-web.min.js&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web_include_css = &quot;assets/js/app-web.min.css&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># All of the above support a list of paths too</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web_include_js = [&quot;assets/js/web1.min.js&quot;, &quot;assets/js/web2.min.js&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="web-form-">Web Form<a href="https://frappeframework.com/docs/user/en/python-api/hooks#web-form" target="_blank" rel="noopener noreferrer"> </a><a href="#web-form-" class="hash-link" aria-label="web-form-的直接链接" title="web-form-的直接链接">​</a></h3><p>These hooks allow you to add inject static JS and CSS assets in <code>web_form.html</code> which is used to render Web Forms. These will work only for Standard Web Forms.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">webform_include_js = {&quot;ToDo&quot;: &quot;public/js/custom_todo.js&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webform_include_css = {&quot;ToDo&quot;: &quot;public/css/custom_todo.css&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> For user created Web Forms, you can directly write the script in the form &gt; itself.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="page-">Page<a href="https://frappeframework.com/docs/user/en/python-api/hooks#page" target="_blank" rel="noopener noreferrer"> </a><a href="#page-" class="hash-link" aria-label="page-的直接链接" title="page-的直接链接">​</a></h3><p>These hooks allow you to inject JS assets in Standard Desk Pages.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">page_js = {&quot;page_name&quot; : &quot;public/js/file.js&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For e.g., Background Jobs is a standard page that is part of Core module in Frappe Framework. To add custom behaviour in that page you can add a JS file in your custom app <code>custom_app/public/js/custom_background_jobs.js</code> and add the following line in your hooks file.</p><p><strong>custom_app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">page_js = {&quot;background_jobs&quot;: &quot;public/js/custom_background_jobs.js&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sounds-">Sounds<a href="https://frappeframework.com/docs/user/en/python-api/hooks#sounds" target="_blank" rel="noopener noreferrer"> </a><a href="#sounds-" class="hash-link" aria-label="sounds-的直接链接" title="sounds-的直接链接">​</a></h2><p>Frappe ships with a set of audio notifications for events like a success action, document submission, error, etc. You can add your own sounds using the <code>sounds</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sounds = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;name&quot;: &quot;ping&quot;, &quot;src&quot;: &quot;/assets/app/sounds/ping.mp3&quot;, &quot;volume&quot;: 0.2}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can play your added sound using the client utility method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.utils.play_sound(&quot;ping&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="install-hooks-">Install Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#install-hooks-" class="hash-link" aria-label="install-hooks-的直接链接" title="install-hooks-的直接链接">​</a></h2><p>These hooks allow you to run code before and after installation of your app. For example, <a href="https://github.com/frappe/erpnext" target="_blank" rel="noopener noreferrer">ERPNext</a> has these <a href="https://github.com/frappe/erpnext/blob/ecfa6344c02b18455637455742202c7fadf1b35d/erpnext/hooks.py#L42-L43" target="_blank" rel="noopener noreferrer">defined</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># python module path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">before_install = &quot;app.setup.install.before_install&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">after_install = &quot;app.setup.install.after_install&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">after_sync = &quot;app.setup.install.after_sync&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/setup/install.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># will run before app is installed on site</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def before_install():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># will run after app is installed on site</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def after_install():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># will run after app fixtures are synced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def after_sync():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="uninstall-hooks-">Uninstall Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#uninstall-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#uninstall-hooks-" class="hash-link" aria-label="uninstall-hooks-的直接链接" title="uninstall-hooks-的直接链接">​</a></h2><p>These hooks allow you to run code before and after uninstallation of your app.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">before_uninstall = &quot;app.setup.uninstall.before_uninstall&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">after_uninstall = &quot;app.setup.uninstall.after_uninstall&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/setup/uninstall.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># will run before app is uninstalled from site</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def before_uninstall():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># will run after app is uninstalled from site</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def after_uninstall():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="migrate-hooks-">Migrate Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#migrate-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#migrate-hooks-" class="hash-link" aria-label="migrate-hooks-的直接链接" title="migrate-hooks-的直接链接">​</a></h2><p>These hooks allow you to run code before and after a migration is run on your site via the command <code>bench --site sitename migrate</code>.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">before_migrate = &quot;app.migrate.before_migrate&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">after_migrate = &quot;app.migrate.after_migrate&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/migrate.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def after_migrate():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # run code after site migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-hooks-">Test Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#test-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#test-hooks-" class="hash-link" aria-label="test-hooks-的直接链接" title="test-hooks-的直接链接">​</a></h2><p>This hook allows you to run code before tests are run on a site. You can use this hook to add seed data to your database which will be available to your tests.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">before_tests = &quot;app.tests.before_tests&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/migrate.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def before_tests():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # add seed data to the database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="file-hooks-">File Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#file-hooks-" class="hash-link" aria-label="file-hooks-的直接链接" title="file-hooks-的直接链接">​</a></h2><p>These hooks allows you to change the implementation of handling user uploaded files.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">before_write_file = &quot;app.overrides.file.before_write&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">write_file = &quot;app.overrides.file.write_file&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete_file_data_content = &quot;app.overrides.file.delete_file&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/overrides/file.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># will run before file is written to disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def before_write():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># will override the implementation of writing file to disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># can be used to upload files to a CDN instead of writing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the file to disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def write_file():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># will override the implementation of deleting file from disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># can be used to delete uploaded files from a CDN instead of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># deleting file from disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def delete_file():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="email-hooks-">Email Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#email-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#email-hooks-" class="hash-link" aria-label="email-hooks-的直接链接" title="email-hooks-的直接链接">​</a></h2><p>These hooks allows you to change the default email module implementation of sending emails and setting default sender address.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">override_email_send = &quot;app.overrides.email.send&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get_sender_details = &quot;app.overrides.email.get_sender_details&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default frappe uses the currently logged in users name and id as sender details on all emails. This can be overriden with <code>get_sender_details</code> hook. And if you want to extend the email modules functionality by using a thirdy party server or app for sending emails then you can use <code>override_email_send</code> hook. This hook will send all the email information (sender, recipient, content(mime)) to a function in custom_app.</p><p><strong>app/overrides/email.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># will be edited as &quot;John Doe &amp;lt;johndoe@gmail.com&amp;gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def get_sender_details():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;John Doe&quot;, &quot;johndoe@gmail.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># self - EmailQueue object refrence for updating status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def send(self, sender, recipient, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # smtp or http request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.update_status(&quot;Sending&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> Note: You&#x27;ll have to handle the status change of email queue in your custom app depending on the webhook response you get from your mail provider/server</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extend-bootinfo-">Extend Bootinfo<a href="https://frappeframework.com/docs/user/en/python-api/hooks#extend-bootinfo" target="_blank" rel="noopener noreferrer"> </a><a href="#extend-bootinfo-" class="hash-link" aria-label="extend-bootinfo-的直接链接" title="extend-bootinfo-的直接链接">​</a></h2><p>After a successful login, the Desk is injected with a dictionary of global values called <code>bootinfo</code>. The <code>bootinfo</code> is available as a global object in Javascript as <code>frappe.boot</code>.</p><p>The <code>bootinfo</code> dict contains a lot of values including:</p><ul><li>System defaults</li><li>Notification status</li><li>Permissions</li><li>User settings</li><li>Language and timezone info</li></ul><p>You can add global values that makes sense for your app via the <code>extend_bootinfo</code> hook.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># python module path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">extend_bootinfo = &quot;app.boot.boot_session&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method is called with one argument <code>bootinfo</code>, on which you can directly add/update values.</p><p><strong>app/boot.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def boot_session(bootinfo):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bootinfo.my_global_key = &quot;my_global_value&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, you can access the value anywhere in your client side code.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">console.log(frappe.boot.my_global_key)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="website-context-">Website Context<a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-context" target="_blank" rel="noopener noreferrer"> </a><a href="#website-context-" class="hash-link" aria-label="website-context-的直接链接" title="website-context-的直接链接">​</a></h2><p>When a Portal Page is rendered, a dictionary is built with all of the possible variables that the page might need to render. This dict is also known as <code>context</code>. You can use these hooks to add or modify values in this dict.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">website_context = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;favicon&quot;: &quot;/assets/app/image/favicon.png&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">update_website_context = &quot;app.overrides.website_context&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>website_context</code> hook is a simple dict of key value pairs. Use this hook for simple value overrides.</p><p>You can use the <code>update_website_context</code> hook for more complex scenarios as it allows you to manipulate the context dict in a python method. The method is called with one argument, which is the <code>context</code> dict. You can either modify the context directly by mutating it or return a dict that will be merged with <code>context</code>.</p><p><strong>app/overrides.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def website_context(context):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context.my_key = &quot;my_value&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="website-controller-context-">Website Controller Context<a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-controller-context" target="_blank" rel="noopener noreferrer"> </a><a href="#website-controller-context-" class="hash-link" aria-label="website-controller-context-的直接链接" title="website-controller-context-的直接链接">​</a></h2><p>Frappe ships with standard web pages like <code>/404</code> and <code>/about</code>. If you want to extend the controller context for these pages you can use the <code>extend_website_page_controller_context</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">extend_website_page_controller_context = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;frappe.www.404&quot;: &quot;app.pages.context_404&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above hook configuration will allow you to extend the context of the 404 page so that you can add your own keys or modify existing ones.</p><p><strong>app/pages.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def context_404(context):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # context of the 404 page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context.my_key = &quot;my_value&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="web-pages-with-dynamic-routes-">Web pages with dynamic routes<a href="https://frappeframework.com/docs/user/en/python-api/hooks#web-pages-with-dynamic-routes" target="_blank" rel="noopener noreferrer"> </a><a href="#web-pages-with-dynamic-routes-" class="hash-link" aria-label="web-pages-with-dynamic-routes-的直接链接" title="web-pages-with-dynamic-routes-的直接链接">​</a></h2><p>Dynamic routes are the routes with dynamic values in them.</p><p><strong>Example:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/profile/&lt;name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>here &quot;name&quot; is the dynamic part but same profile page is rendered. By default, Frappe supports dynamic routes from documents in &quot;Web Page&quot; doctype. To add more dynamic routes, <code>get_web_pages_with_dynamic_routes</code> can be used.</p><p><strong>app/</strong><a href="http://hooks.py/" target="_blank" rel="noopener noreferrer"><strong>hooks.py</strong></a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">get_web_pages_with_dynamic_routes = &quot;script.get_web_pages_with_dynamic_routes&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>script.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def get_web_pages_with_dynamic_routes():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;doctype&quot;: &quot;Custom Web Page&quot;, // Doctype extended from WebsiteGenerator https://frappeframework.com/docs/user/en/guides/portal-development/generators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;route&quot;: &quot;/profile/&lt;name&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       &quot;name&quot;: &quot;profile-page&quot; // name of the web view document to render</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, ...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="website-clear-cache-">Website Clear Cache<a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-clear-cache" target="_blank" rel="noopener noreferrer"> </a><a href="#website-clear-cache-" class="hash-link" aria-label="website-clear-cache-的直接链接" title="website-clear-cache-的直接链接">​</a></h2><p>Frappe Framework caches a lot of static web pages for fast subsequent rendering. If you have created web pages that use cached values, and you want to invalidate the cache, this hook is place to do it.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">website_clear_cache = &quot;app.overrides.clear_website_cache&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method is called with one argument <code>path</code>. <code>path</code> is set when cache is being cleared for one route, and is <code>None</code> when cache is cleared for all routes. You need to handle this case if your cache is page specific.</p><p><strong>app/overrides.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def clear_website_cache(path=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if path:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # clear page related cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # clear all cache</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="website-redirects-">Website Redirects<a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-redirects" target="_blank" rel="noopener noreferrer"> </a><a href="#website-redirects-" class="hash-link" aria-label="website-redirects-的直接链接" title="website-redirects-的直接链接">​</a></h2><p>Website Redirects allow you to define redirects from one route to another. Frappe will generate a 304 Redirect response when the source URL is requested and redirect to the target URL. You can redirect plain URLs or you can use regex to match your URLs.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">website_redirects = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;source&quot;: &quot;/compare&quot;, &quot;target&quot;: &quot;/comparison&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;source&quot;: &quot;/docs(/.*)?&quot;, &quot;target&quot;: &quot;https://docs.tennismart.com/\1&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;source&quot;: r&#x27;/items/item\?item_name=(.*)&#x27;, &quot;target&quot;: &#x27;/items/\1&#x27;, match_with_query_string=True},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will result in following redirects:</p><ul><li><code>/compare</code> to <code>/comparison</code></li><li><code>/docs/getting-started</code> to <code>https://docs.tennismart.com/getting-started</code></li><li><code>/docs/help</code> to <code>https://docs.tennismart.com/help</code></li><li><code>/items/item?item_name=racket</code> to <code>https://docs.tennismart.com/items/racket</code></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="website-route-rules-">Website Route Rules<a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-route-rules" target="_blank" rel="noopener noreferrer"> </a><a href="#website-route-rules-" class="hash-link" aria-label="website-route-rules-的直接链接" title="website-route-rules-的直接链接">​</a></h2><p>Website Route Rules allow you to map URLs to custom controllers. This is commonly used to generate clean URLs for pages.</p><p>Let&#x27;s say you want to have <code>/projects</code> route to display list of projects. This can be done by creating a <code>projects.html</code> and <code>projects.py</code> in <code>www</code> folder.</p><p>You also want to have <code>/project/&lt;name&gt;</code> route to show a project page where name is the dynamic. To do this you can use the <code>website_route_rules</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">website_route_rules = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;from_route&quot;: &quot;/projects/&amp;lt;name&amp;gt;&quot;, &quot;to_route&quot;: &quot;app/projects/project&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, you can create your controller files in <code>app/projects</code> folder.</p><p><strong>app/projects/project.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def get_context(context):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    project_name = frappe.form_dict.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    project = frappe.get_doc(&quot;Project&quot;, project_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context.project = project</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/projects/project.html</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;h1&gt;{{ project.title }}&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;p&gt;{{ project.description }}&lt;/p&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="website-404-">Website 404<a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-404" target="_blank" rel="noopener noreferrer"> </a><a href="#website-404-" class="hash-link" aria-label="website-404-的直接链接" title="website-404-的直接链接">​</a></h2><p>Frappe renders a default <code>/404</code> route when a page is not found. You can change this using the <code>website_catch_all</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">website_catch_all = &quot;not_found&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will render <code>/not_found</code> when a 404 is occurred. It is upto you to implement the template <code>www/not_found.html</code> and controller <code>www/not_found.py</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="default-homepage-">Default Homepage<a href="https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage" target="_blank" rel="noopener noreferrer"> </a><a href="#default-homepage-" class="hash-link" aria-label="default-homepage-的直接链接" title="default-homepage-的直接链接">​</a></h2><p>Homepage is the page which is rendered when you visit the root URL (<code>/</code>) of your site. There are multiple ways to configure what page is rendered as the default homepage.</p><p>By default, the homepage is <code>index</code>. So, frappe will try to render <code>index.html</code> from <code>www</code> folder. This can be overridden using the <code>homepage</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">homepage = &quot;homepage&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will load the <code>www/homepage.html</code> as the default homepage.</p><p>You can also have role based homepage by using the <code>role_home_page</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">role_home_page = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Customer&quot;: &quot;orders&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Supplier&quot;: &quot;bills&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will make <code>/orders</code> the default homepage for users with the <strong>Customer</strong> role and <code>/bills</code> for users with the <strong>Supplier</strong> role.</p><p>You can have even more control over the logic by using the <code>get_website_user_home_page</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">get_website_user_home_page = &quot;app.website.get_home_page&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/website.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def get_home_page(user):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if is_projects_user(user):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;projects&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if is_partner(user):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &quot;partner-dashboard&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;index&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> If all of these hooks are defined, the <code>get_website_user_home_page</code> will have &gt; higher priority over the others, and <code>role_home_page</code> will have higher &gt; priority over <code>homepage</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="portal-sidebar-">Portal Sidebar<a href="https://frappeframework.com/docs/user/en/python-api/hooks#portal-sidebar" target="_blank" rel="noopener noreferrer"> </a><a href="#portal-sidebar-" class="hash-link" aria-label="portal-sidebar-的直接链接" title="portal-sidebar-的直接链接">​</a></h2><p>Some Portal views are shown with a sidebar with links to quickly jump to pages. These sidebar items can be customized via hooks.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">portal_menu_items = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;title&quot;: &quot;Dashboard&quot;, &quot;route&quot;: &quot;/dashboard&quot;, &quot;role&quot;: &quot;Customer&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;title&quot;: &quot;Orders&quot;, &quot;route&quot;: &quot;/orders&quot;, &quot;role&quot;: &quot;Customer&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will add two sidebar links for users with the role Customer.</p><p><img loading="lazy" src="https://frappeframework.com/files/hooks-portal-menu-items.png" alt="Portal Sidebar" class="img_ev3q">These sidebar items are hardcoded in your app so they are not customizable from Desk. For e.g., if you want to hide a sidebar link temporarily you will have to make changes in your code.</p><p>There is another hook called <code>standard_portal_menu_items</code> which allows you to do that. The sidebar links set in <code>standard_portal_menu_items</code> hook will be synced with the database.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">standard_portal_menu_items = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;title&quot;: &quot;Dashboard&quot;, &quot;route&quot;: &quot;/dashboard&quot;, &quot;role&quot;: &quot;Website Manager&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;title&quot;: &quot;Orders&quot;, &quot;route&quot;: &quot;/orders&quot;, &quot;role&quot;: &quot;Website Manager&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will sync sidebar items to the Portal Settings which can later be edited by any System User.</p><p><img loading="lazy" src="https://frappeframework.com/files/hooks-standard-portal-menu-items.png" alt="Portal Settings" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="brand-html-">Brand HTML<a href="https://frappeframework.com/docs/user/en/python-api/hooks#brand-html" target="_blank" rel="noopener noreferrer"> </a><a href="#brand-html-" class="hash-link" aria-label="brand-html-的直接链接" title="brand-html-的直接链接">​</a></h2><p>This hook allows you to customize the brand logo in the navbar of your website.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brand_html = &#x27;&lt;div&gt;&lt;img src=&quot;tennismart.png&quot;/&gt; TennisMart&lt;/div&gt;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the <code>brand_html</code> is defined, it will override the default brand html in the navbar. It is not recommended to use hooks to change your brand logo, unless you want to version control it, otherwise you can use Website Settings to change it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="base-template-">Base Template<a href="https://frappeframework.com/docs/user/en/python-api/hooks#base-template" target="_blank" rel="noopener noreferrer"> </a><a href="#base-template-" class="hash-link" aria-label="base-template-的直接链接" title="base-template-的直接链接">​</a></h2><p>When a web page is rendered, it extends <code>templates/base.html</code> by default. You can override the base template by overriding the <code>base_template</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">base_template = &quot;app/templates/my_custom_base.html&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also customize base templates based on routes. For e.g., if you want to use a different base template for all the routes that start with <code>docs/*</code> then you can use the <code>base_template_map</code> hook. The key must be a regex that matches the route. All other routes will fallback to the default base template.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">base_template_map = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    r&quot;docs.*&quot;: &quot;app/templates/doc_template.html&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="integrations-">Integrations<a href="https://frappeframework.com/docs/user/en/python-api/hooks#integrations" target="_blank" rel="noopener noreferrer"> </a><a href="#integrations-" class="hash-link" aria-label="integrations-的直接链接" title="integrations-的直接链接">​</a></h2><p>These hooks allow you to customize behaviour of 3rd-party integrations in Frappe.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="braintree-success-page-">Braintree Success Page<a href="https://frappeframework.com/docs/user/en/python-api/hooks#braintree-success-page" target="_blank" rel="noopener noreferrer"> </a><a href="#braintree-success-page-" class="hash-link" aria-label="braintree-success-page-的直接链接" title="braintree-success-page-的直接链接">​</a></h3><p>This hook allows you to override the default redirect URL on successful payment of Braintree transaction.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">braintree_success_page = &quot;app.integrations.braintree_success_page&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method is called with one argument <code>data</code> which has the meta data of the payment.</p><p><strong>app/integrations.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def braintree_success_page(data):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # data.reference_doctype</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # data.reference_docname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;/thank-you&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="calendars-">Calendars<a href="https://frappeframework.com/docs/user/en/python-api/hooks#calendars" target="_blank" rel="noopener noreferrer"> </a><a href="#calendars-" class="hash-link" aria-label="calendars-的直接链接" title="calendars-的直接链接">​</a></h2><p>The calendar hook is a list of doctype names which are shown as menu items for quick navigation from the Calendar page in Desk.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">calendars = [&quot;Appointment&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://frappeframework.com/files/hooks-event-menu-shortcuts.png" alt="Event Menu Shortcuts" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clear-cache-">Clear Cache<a href="https://frappeframework.com/docs/user/en/python-api/hooks#clear-cache" target="_blank" rel="noopener noreferrer"> </a><a href="#clear-cache-" class="hash-link" aria-label="clear-cache-的直接链接" title="clear-cache-的直接链接">​</a></h2><p>This hook allows you to clear your app specific cache values when the global cache is being cleared by frappe.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clear_cache = &quot;app.cache.clear_cache&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use this hook to clear your app specific cache. The method is called without any arguments.</p><p><strong>app/cache.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def clear_cache():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    frappe.cache().hdel(&quot;app_specific_cache&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="default-mail-footer-">Default Mail Footer<a href="https://frappeframework.com/docs/user/en/python-api/hooks#default-mail-footer" target="_blank" rel="noopener noreferrer"> </a><a href="#default-mail-footer-" class="hash-link" aria-label="default-mail-footer-的直接链接" title="default-mail-footer-的直接链接">​</a></h2><p>If you want to set the default footer of all the emails that are sent out by Frappe, you can use the <code>default_mail_footer</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">default_mail_footer = &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Sent via &lt;a href=&quot;https://tennismart.com&quot; target=&quot;_blank&quot;&gt;TennisMart&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&quot;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, all the emails will have <strong>Sent via TennisMart</strong> in the footer.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="session-hooks-">Session Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#session-hooks-" class="hash-link" aria-label="session-hooks-的直接链接" title="session-hooks-的直接链接">​</a></h2><p>These hooks are triggered over the login lifecycle of a user. <code>on_login</code> is triggered immediately after a successful login, <code>on_session_creation</code> is triggered after the session is setup, <code>on_logout</code> is triggered after the user logs out.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">on_login = &quot;app.overrides.successful_login&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on_session_creation = &quot;app.overrides.allocate_free_credits&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on_logout = &quot;app.overrides.clear_user_cache&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method will be called with one argument <code>login_manager</code>.</p><p><strong>app/overrides.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def allocate_free_credits(login_manager):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # allocate free credits to frappe.session.user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="auth-hooks-">Auth Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#auth-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#auth-hooks-" class="hash-link" aria-label="auth-hooks-的直接链接" title="auth-hooks-的直接链接">​</a></h2><p>These hooks are triggered during request authentication. Custom headers, Authorization headers can be validated here, user is verified and mapped to the request using <code>frappe.set_user()</code>. Use <code>frappe.request</code> and <code>frappe.*</code> to validate request and map user.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">auth_hooks = [&quot;app.overrides.validate_custom_jwt&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method will be called during request authentication.</p><p><strong>app/overrides.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def validate_custom_jwt():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # validate jwt from header, verify signature, set user from jwt.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use this method to check for incoming request header, verify the header and map the user to the request. If header verification fails DO NOT throw error to continue with other hooks. Unverified request is treated as &quot;Guest&quot; request by default. You may use third party server, shared database or any alternative of choice to verify and map request and user.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fixtures-">Fixtures<a href="https://frappeframework.com/docs/user/en/python-api/hooks#fixtures" target="_blank" rel="noopener noreferrer"> </a><a href="#fixtures-" class="hash-link" aria-label="fixtures-的直接链接" title="fixtures-的直接链接">​</a></h2><p>Fixtures are database records that are synced using JSON files when you install and update your site.</p><p>Let&#x27;s say you want to create a set of categories in the database whenever you install your app. To do that, create the set of categories in your local site, and add the doctype name in the <code>fixtures</code> hook.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fixtures = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # export all records from the Category table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Category&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, run the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bench --site sitename export-fixtures</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command will create a JSON file for each doctype which will contain the data to generate list of records. You can test this by creating a new site and by installing your app on that site.</p><p>You can also add conditions for exporting records.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fixtures = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # export all records from the Category table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Category&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # export only those records that match the filters from the Role table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;dt&quot;: &quot;Role&quot;, &quot;filters&quot;: [[&quot;role_name&quot;, &quot;like&quot;, &quot;Admin%&quot;]]},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Some fields are for internal use only. They will be set and kept up-to-date by the system automatically. These will not get exported: <code>modified_by</code>, <code>creation</code>, <code>owner</code>, <code>idx</code>, <code>lft</code> and <code>rgt</code>. For child table records, the following fields will not get exported: <code>docstatus</code>, <code>doctype</code>, <code>modified</code> and <code>name</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-hooks-">Document Hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#document-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#document-hooks-" class="hash-link" aria-label="document-hooks-的直接链接" title="document-hooks-的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="modify-list-query-">Modify List Query<a href="https://frappeframework.com/docs/user/en/python-api/hooks#modify-list-query" target="_blank" rel="noopener noreferrer"> </a><a href="#modify-list-query-" class="hash-link" aria-label="modify-list-query-的直接链接" title="modify-list-query-的直接链接">​</a></h3><p>You can customize how list of records are queried for a DocType by adding custom match conditions using the <code>permission_query_conditions</code> hook. This match condition must be a valid WHERE clause fragment for an SQL query.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">permission_query_conditions = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ToDo&quot;: &quot;app.permissions.todo_query&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method is called with a single argument <code>user</code> which can be <code>None</code>. The method should return a string that is a valid SQL WHERE clause.</p><p><strong>app/permissions.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def todo_query(user):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if not user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        user = frappe.session.user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # todos that belong to user or assigned by user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;(`tabToDo`.owner = {user} or `tabToDo`.assigned_by = {user})&quot;.format(user=frappe.db.escape(user))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, if you use the <code>frappe.db.get_list</code> method, your WHERE clause will be appended to the query.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">todos = frappe.db.get_list(&quot;ToDo&quot;, debug=1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">select `tabToDo`.`name`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from `tabToDo`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">where ((`tabToDo`.owner = &#x27;john@doe.com&#x27; or `tabToDo`.assigned_by = &#x27;john@doe.com&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order by `tabToDo`.`modified` DESC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> This hook will only affect the result of <code>frappe.db.get_list</code> method and not &gt; <code>frappe.db.get_all</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-permissions-">Document Permissions<a href="https://frappeframework.com/docs/user/en/python-api/hooks#document-permissions" target="_blank" rel="noopener noreferrer"> </a><a href="#document-permissions-" class="hash-link" aria-label="document-permissions-的直接链接" title="document-permissions-的直接链接">​</a></h3><p>You can modify the behaviour of <code>doc.has_permission</code> document method for any DocType and add custom permission checking logic using the <code>has_permission</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">has_permission = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Event&quot;: &quot;app.permissions.event_has_permission&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method will be passed the <code>doc</code>, <code>user</code> and <code>permission_type</code> as arguments. It should return <code>True</code> or a <code>False</code> value. If <code>None</code> is returned, it will fallback to default behaviour.</p><p><strong>app/permissions.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def event_has_permission(doc, user=None, permission_type=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # when reading a document allow if event is Public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if permission_type == &quot;read&quot; and doc.event_type == &quot;Public&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # when writing a document allow if event owned by user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if permission_type == &quot;write&quot; and doc.owner == user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return False</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="override-doctype-class-">Override DocType Class<a href="https://frappeframework.com/docs/user/en/python-api/hooks#override-doctype-class" target="_blank" rel="noopener noreferrer"> </a><a href="#override-doctype-class-" class="hash-link" aria-label="override-doctype-class-的直接链接" title="override-doctype-class-的直接链接">​</a></h3><p>You can override/extend the class for standard doctypes by using the <code>override_doctype_class</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">override_doctype_class = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ToDo&quot;: &quot;app.overrides.todo.CustomToDo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/overrides/todo.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from frappe.desk.doctype.todo.todo import ToDo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CustomToDo(ToDo):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def on_update(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.my_custom_code()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super().on_update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def my_custom_code(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> It is recommended that you extend the standard class of the doctype, otherwise &gt; you will have to implement all of the core functionality.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="override-form-scripts-">Override Form Scripts<a href="https://frappeframework.com/docs/user/en/python-api/hooks#override-form-scripts" target="_blank" rel="noopener noreferrer"> </a><a href="#override-form-scripts-" class="hash-link" aria-label="override-form-scripts-的直接链接" title="override-form-scripts-的直接链接">​</a></h3><p>You can override/extend <a href="https://frappeframework.com/docs/v14/user/en/api/form#standard-form-scripts" target="_blank" rel="noopener noreferrer">Standard Form Scripts</a> by using the <code>doctype_js</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">doctype_js = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ToDo&quot;: &quot;public/js/todo.js&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/public/js/todo.js</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">frappe.ui.form.on(&quot;Todo&quot;, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    refresh: function(frm) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        frm.trigger(&quot;my_custom_code&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    my_custom_code: function(frm){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(frm.doc.name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> The events/functions defined in <code>app/public/todo.js</code> will extend &gt; those in the standard form script of <code>ToDo</code> doctype.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="crud-events-">CRUD Events<a href="https://frappeframework.com/docs/user/en/python-api/hooks#crud-events" target="_blank" rel="noopener noreferrer"> </a><a href="#crud-events-" class="hash-link" aria-label="crud-events-的直接链接" title="crud-events-的直接链接">​</a></h3><p>You can hook into various CRUD events of any doctype using the <code>doc_events</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">doc_events = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;*&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # will run after any DocType record is inserted into database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;after_insert&quot;: &quot;app.crud_events.after_insert_all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ToDo&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # will run before a ToDo record is inserted into database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;before_insert&quot;: &quot;app.crud_events.before_insert_todo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method will be passed the doc and the method name as arguments.</p><p><strong>app/crud_events.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def after_insert_all(doc, method=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def before_insert_todo(doc, method=None):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> See <a href="https://frappeframework.com/docs/v14/user/en/basics/doctypes/controllers#controller-hooks" target="_blank" rel="noopener noreferrer">Controller Hooks</a> &gt; for a list of all available hooks.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="override-whitelisted-methods-">Override Whitelisted Methods<a href="https://frappeframework.com/docs/user/en/python-api/hooks#override-whitelisted-methods" target="_blank" rel="noopener noreferrer"> </a><a href="#override-whitelisted-methods-" class="hash-link" aria-label="override-whitelisted-methods-的直接链接" title="override-whitelisted-methods-的直接链接">​</a></h3><p>Whitelisted Methods are python methods that are accessible on a REST endpoint and consumed by a client. You can override standard whitelisted methods that are part of the core framework using the <code>override_whitelisted_methods</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">override_whitelisted_methods = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;frappe.client.get_count&quot;: &quot;app.whitelisted.custom_get_count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method should have the same signature as the original method.</p><p><strong>app/whitelisted.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def custom_get_count(doctype, filters=None, debug=False, cache=False):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # your custom implementation of the standard get_count method provided by frappe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ignore-links-on-delete-">Ignore Links on Delete<a href="https://frappeframework.com/docs/user/en/python-api/hooks#ignore-links-on-delete" target="_blank" rel="noopener noreferrer"> </a><a href="#ignore-links-on-delete-" class="hash-link" aria-label="ignore-links-on-delete-的直接链接" title="ignore-links-on-delete-的直接链接">​</a></h3><p>To ignore links to specific DocTypes when deleting documents, you can specify them in the <code>ignore_links_on_delete</code> hook like so:</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ignore_links_on_delete = [&quot;Communication&quot;, &quot;ToDo&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="form-timeline-">Form Timeline<a href="https://frappeframework.com/docs/user/en/python-api/hooks#form-timeline" target="_blank" rel="noopener noreferrer"> </a><a href="#form-timeline-" class="hash-link" aria-label="form-timeline-的直接链接" title="form-timeline-的直接链接">​</a></h3><p>The timeline section of <a href="https://frappeframework.com/docs/v14/user/en/desk#form-view" target="_blank" rel="noopener noreferrer">form view</a> of a document shows an audit trail of actions performed on that document like views, value changes, comments and related communications, etc.</p><p>Apart from these standard actions, there might arise a situation where you need to add your own custom actions. You can do this via <code>additional_timeline_content</code> hook.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">additional_timeline_content: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # show in each document&#x27;s timeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;*&quot;: [&quot;app.timeline.all_timeline&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # only show in ToDo&#x27;s timeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ToDo&quot;: [&quot;app.timeline.todo_timeline&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method will be passed the doctype and docname as arguments. You can perform queries and return actions related to that document as a list of dicts as shown in the example. Each dict in the list must have a <code>creation</code> value which will be used to sort the item in the timeline.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def todo_timeline(doctype, docname):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # this method should return a list of dicts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             # this will be used to sort the content in the timeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;creation&quot;: &quot;22-05-2020 18:00:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # this JS template will be rendered in the timeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;template&quot;: &quot;custom_timeline_template&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # this data will be passed to the template.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;template_data&quot;: {&quot;key&quot;: &quot;value&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scheduler-events-">Scheduler Events<a href="https://frappeframework.com/docs/user/en/python-api/hooks#scheduler-events" target="_blank" rel="noopener noreferrer"> </a><a href="#scheduler-events-" class="hash-link" aria-label="scheduler-events-的直接链接" title="scheduler-events-的直接链接">​</a></h2><p>You can use Scheduler Events for running tasks periodically in the background using the <code>scheduler_events</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scheduler_events = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;hourly&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # will run hourly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.scheduled_tasks.update_database_usage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/scheduled_tasks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def update_database_usage():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> After changing any scheduled events in <code>hooks.py</code>, you need to run <code>bench migrate</code> for changes to take effect.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="available-events-">Available Events<a href="https://frappeframework.com/docs/user/en/python-api/hooks#available-events" target="_blank" rel="noopener noreferrer"> </a><a href="#available-events-" class="hash-link" aria-label="available-events-的直接链接" title="available-events-的直接链接">​</a></h3><ul><li><p><code>hourly</code>, <code>daily</code>, <code>weekly</code>, <code>monthly</code></p><p>These events will trigger every hour, day, week and month respectively.</p></li><li><p><code>hourly_long</code>, <code>daily_long</code>, <code>weekly_long</code>, <code>monthly_long</code></p><p>Same as above but these jobs are run in the <a href="https://frappeframework.com/docs/v14/user/en/basics/directory-structure#worker_long" target="_blank" rel="noopener noreferrer">long worker</a> suitable for long running jobs.</p></li><li><p><code>all</code></p><p>The <code>all</code> event is triggered every 60 seconds. This can be configured via the <code>scheduler_tick_interval</code> key in <code>common_site_config.json</code></p></li><li><p><code>cron</code></p><p>A valid cron string that can be parsed by <a href="https://pypi.org/project/croniter/" target="_blank" rel="noopener noreferrer">croniter</a>.</p></li></ul><p>Usage Examples:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scheduler_events = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;daily&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.scheduled_tasks.manage_recurring_invoices&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;daily_long&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.scheduled_tasks..take_backups_daily&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cron&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;15 18 * * *&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;app.scheduled_tasks..delete_all_barcodes_for_users&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*/6 * * * *&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;app.scheduled_tasks..collect_error_snapshots&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;annual&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;app.scheduled_tasks.collect_error_snapshots&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="jinja-customization-">Jinja Customization<a href="https://frappeframework.com/docs/user/en/python-api/hooks#jinja-customization" target="_blank" rel="noopener noreferrer"> </a><a href="#jinja-customization-" class="hash-link" aria-label="jinja-customization-的直接链接" title="jinja-customization-的直接链接">​</a></h2><p>Frappe provides a list of <a href="https://frappeframework.com/docs/v14/user/en/api/jinja" target="_blank" rel="noopener noreferrer">global utility methods</a> in Jinja templates. To add your own methods and filters you can use the <code>jinja</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jinja = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;methods&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.jinja.methods&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.utils.get_fullname&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;filters&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.jinja.filters&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app.utils.format_currency&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>app/jinja/methods.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def sum(a, b):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return a + b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def multiply(a, b):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return a * b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> If the path is a module path, all the methods in that module will be added.</p><p><strong>app/utils.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def get_fullname(user):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    first_name, last_name = frappe.db.get_value(&quot;User&quot;, user, [&quot;first_name&quot;, &quot;last_name&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return first_name + &quot; &quot; + last_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def format_currency(value, currency):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return currency + &quot; &quot; + str(value)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, you can use these utilities in your Jinja templates like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;h1&gt;Hi, {{ get_fullname(frappe.session.user) }}&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;p&gt;Your account balance is {{ account_balance | format_currency(&quot;INR&quot;) }}&lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;p&gt;1 + 2 = {{ sum(1, 2) }}&lt;/p&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prevent-auto-cancellation-of-linked-documents-">Prevent Auto Cancellation of Linked Documents<a href="https://frappeframework.com/docs/user/en/python-api/hooks#prevent-auto-cancellation-of-linked-documents" target="_blank" rel="noopener noreferrer"> </a><a href="#prevent-auto-cancellation-of-linked-documents-" class="hash-link" aria-label="prevent-auto-cancellation-of-linked-documents-的直接链接" title="prevent-auto-cancellation-of-linked-documents-的直接链接">​</a></h2><p>To prevent documents of a specific DocType from being automatically cancelled on the cancellation of any linked documents you can use the <code>auto_cancel_exempted_doctypes</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">auto_cancel_exempted_doctypes = [&quot;Payment Entry&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, if any document (for e.g Sales Invoice) that is linked with Payment Entry is cancelled, it will skip the auto-cancellation of the linked Payment Entry document.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="notification-configurations-">Notification configurations<a href="https://frappeframework.com/docs/user/en/python-api/hooks#notification-configurations" target="_blank" rel="noopener noreferrer"> </a><a href="#notification-configurations-" class="hash-link" aria-label="notification-configurations-的直接链接" title="notification-configurations-的直接链接">​</a></h2><p>The notification configuration hook is used to customize the items shown in the Notification dropdown in Desk. It can be configured by the <code>notification_config</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">notification_config = &quot;app.notification.get_config&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The method is called without any arguments.</p><p><strong>app/notification.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def get_config():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;for_doctype&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Issue&quot;: {&quot;status&quot;:&quot;Open&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Issue&quot;: {&quot;status&quot;:&quot;Open&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;for_module_doctypes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ToDo&quot;: &quot;To Do&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Event&quot;: &quot;Calendar&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Comment&quot;: &quot;Messages&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;for_module&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;To Do&quot;: &quot;frappe.core.notifications.get_things_todo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Calendar&quot;: &quot;frappe.core.notifications.get_todays_events&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Messages&quot;: &quot;frappe.core.notifications.get_unread_messages&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration has three parts:</p><ol><li><code>for_doctype</code> part of the above configuration marks any &quot;Issue&quot; or &quot;Customer Issue&quot; as unread if its status is Open</li><li><code>for_module_doctypes</code> maps doctypes to module&#x27;s unread count.</li><li><code>for_module</code> maps modules to functions to obtain its unread count. The functions are called without any argument.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="required-apps-">Required Apps<a href="https://frappeframework.com/docs/user/en/python-api/hooks#required-apps" target="_blank" rel="noopener noreferrer"> </a><a href="#required-apps-" class="hash-link" aria-label="required-apps-的直接链接" title="required-apps-的直接链接">​</a></h2><p>When building apps, you might create apps that build on top of other apps. To make sure dependent apps are installed when someone installs your app, you can use the <code>required_apps</code> hook.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">required_apps = [&quot;erpnext&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration will make sure <code>erpnext</code> is installed when someone installs your app.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="user-data-protection--privacy-">User Data Protection &amp; Privacy<a href="https://frappeframework.com/docs/user/en/python-api/hooks#user-data-protection-privacy" target="_blank" rel="noopener noreferrer"> </a><a href="#user-data-protection--privacy-" class="hash-link" aria-label="user-data-protection--privacy-的直接链接" title="user-data-protection--privacy-的直接链接">​</a></h2><p>User Data Privacy features like personal data download and personal data deletion come out of the box in Frappe. What constitutes as personal data may be defined by the App publisher in the application&#x27;s <code>hooks.py</code> file as <code>user_data_fields</code>.</p><p><strong>app/hooks.py</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">user_data_fields = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;doctype&quot;: &quot;Access Log&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;doctype&quot;: &quot;Comment&quot;, &quot;strict&quot;: True},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;doctype&quot;: &quot;Contact&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;filter_by&quot;: &quot;email_id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;rename&quot;: True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;doctype&quot;: &quot;Contact Email&quot;, &quot;filter_by&quot;: &quot;email_id&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;doctype&quot;: &quot;File&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;filter_by&quot;: &quot;attached_to_name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;redact_fields&quot;: [&quot;file_name&quot;, &quot;file_url&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;doctype&quot;: &quot;Email Unsubscribe&quot;, &quot;filter_by&quot;: &quot;email&quot;, &quot;partial&quot;: True},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>DocTypes that have user data should be mapped under this hook using the above format. Upon data deletion or download requests from users, this hook will be utilized to map over the specified DocTypes. The options available to modify documents are:</p><table><thead><tr><th align="left">Field</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>doctype</code></td><td align="left">DocType that contains user data.</td></tr><tr><td align="left"><code>filter_by</code></td><td align="left">Docfield to filter the documents by. If unset, defaults to <code>owner</code>.</td></tr><tr><td align="left"><code>partial</code></td><td align="left">If set, all text fields are parsed and user&#x27;s full name and username references will be redacted.</td></tr><tr><td align="left"><code>redact_fields</code></td><td align="left">Fields that have to be redacted. If unspecified, it considers partial data redaction from all text fields.</td></tr><tr><td align="left"><code>rename</code></td><td align="left">If document name contains user data, set this field to rename document to anonymize it.</td></tr><tr><td align="left"><code>strict</code></td><td align="left">If set to True, any user data will be redacted from all documents of current DocType. If unset, it defaults to False which means it only filters through documents in which user is the owner.</td></tr></tbody></table><p>&gt;<!-- --> Note: Personal Data Download only utilizes the doctype and filter_by fields defined in <code>user_data_fields</code></p><p>Related Topics:</p><ol><li><a href="https://docs.erpnext.com/docs/user/manual/en/setting-up/personal-data-deletion" target="_blank" rel="noopener noreferrer">Personal Data Deletion</a></li><li><a href="https://docs.erpnext.com/docs/user/manual/en/setting-up/personal-data-download" target="_blank" rel="noopener noreferrer">Personal Data Download</a></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="signup-form-template-">Signup Form Template<a href="https://frappeframework.com/docs/user/en/python-api/hooks#signup-form-template" target="_blank" rel="noopener noreferrer"> </a><a href="#signup-form-template-" class="hash-link" aria-label="signup-form-template-的直接链接" title="signup-form-template-的直接链接">​</a></h2><p>If you want to add additional fields to the signup form you can use this hook. Create a template file which contains the custom signup form. Pass this template to the custom signup hook.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">signup_form_template = &quot;school/templates/signup-form.html&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&gt;<!-- --> Note: If you want custom fields in signup form, it will require additional fields in the user doctype. You will have to add these fields using fixtures. Also you will have to write your own submit handler for this signup form and a function on the server side which will signup the user. This way you can also write validations for the custom fields you add.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="list-of-available-hooks-">List of available hooks<a href="https://frappeframework.com/docs/user/en/python-api/hooks#list-of-available-hooks" target="_blank" rel="noopener noreferrer"> </a><a href="#list-of-available-hooks-" class="hash-link" aria-label="list-of-available-hooks-的直接链接" title="list-of-available-hooks-的直接链接">​</a></h2><table><thead><tr><th align="left">Hook Name</th><th align="left">Explanation</th></tr></thead><tbody><tr><td align="left"><code>additional_timeline_content</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#form-timeline" target="_blank" rel="noopener noreferrer">Form Timeline</a></td></tr><tr><td align="left"><code>after_install</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks" target="_blank" rel="noopener noreferrer">Install Hooks</a></td></tr><tr><td align="left"><code>after_migrate</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#migrate-hooks" target="_blank" rel="noopener noreferrer">Migrate Hooks</a></td></tr><tr><td align="left"><code>after_sync</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks" target="_blank" rel="noopener noreferrer">Install Hooks</a></td></tr><tr><td align="left"><code>app_include_css</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#desk" target="_blank" rel="noopener noreferrer">Desk Assets</a></td></tr><tr><td align="left"><code>app_include_js</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#desk" target="_blank" rel="noopener noreferrer">Desk Assets</a></td></tr><tr><td align="left"><code>app_logo_url</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#app-meta-data" target="_blank" rel="noopener noreferrer">App Meta Data</a></td></tr><tr><td align="left"><code>app_title</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#app-meta-data" target="_blank" rel="noopener noreferrer">App Meta Data</a></td></tr><tr><td align="left"><code>auto_cancel_exempted_doctypes</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#prevent-auto-cancellation-of-linked-documents" target="_blank" rel="noopener noreferrer">Prevent Auto Cancellation</a></td></tr><tr><td align="left"><code>base_template_map</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#base-template" target="_blank" rel="noopener noreferrer">Base Template</a></td></tr><tr><td align="left"><code>base_template</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#base-template" target="_blank" rel="noopener noreferrer">Base Template</a></td></tr><tr><td align="left"><code>before_install</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks" target="_blank" rel="noopener noreferrer">Install Hooks</a></td></tr><tr><td align="left"><code>before_migrate</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#migrate-hooks" target="_blank" rel="noopener noreferrer">Migrate Hooks</a></td></tr><tr><td align="left"><code>before_tests</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#test-hooks" target="_blank" rel="noopener noreferrer">Test Hooks</a></td></tr><tr><td align="left"><code>before_write_file</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks" target="_blank" rel="noopener noreferrer">File Hooks</a></td></tr><tr><td align="left"><code>bot_parsers</code></td><td align="left"><em>Deprecated</em></td></tr><tr><td align="left"><code>braintree_success_page</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#braintree-success-page" target="_blank" rel="noopener noreferrer">Braintree Success Page</a></td></tr><tr><td align="left"><code>brand_html</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#brand-html" target="_blank" rel="noopener noreferrer">Brand HTML</a></td></tr><tr><td align="left"><code>calendars</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#calendars" target="_blank" rel="noopener noreferrer">Calendars</a></td></tr><tr><td align="left"><code>clear_cache</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#clear-cache" target="_blank" rel="noopener noreferrer">Clear Cache</a></td></tr><tr><td align="left"><code>communication_doctypes</code></td><td align="left"></td></tr><tr><td align="left"><code>default_mail_footer</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#default-mail-footer" target="_blank" rel="noopener noreferrer">Default Mail Footer</a></td></tr><tr><td align="left"><code>delete_file_data_content</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks" target="_blank" rel="noopener noreferrer">File Hooks</a></td></tr><tr><td align="left"><code>doc_events</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#crud-events" target="_blank" rel="noopener noreferrer">Document CRUD Events</a></td></tr><tr><td align="left"><code>doctype_js</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#override-form-scripts" target="_blank" rel="noopener noreferrer">Override Form Scripts</a></td></tr><tr><td align="left"><code>domains</code></td><td align="left"></td></tr><tr><td align="left"><code>dump_report_map</code></td><td align="left"><em>Deprecated</em></td></tr><tr><td align="left"><code>extend_bootinfo</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#extend-bootinfo" target="_blank" rel="noopener noreferrer">Extend Bootinfo</a></td></tr><tr><td align="left"><code>extend_website_page_controller_context</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-controller-context" target="_blank" rel="noopener noreferrer">Website Controller Context</a></td></tr><tr><td align="left"><code>filters_config</code></td><td align="left"></td></tr><tr><td align="left"><code>fixtures</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#fixtures" target="_blank" rel="noopener noreferrer">Fixtures</a></td></tr><tr><td align="left"><code>get_site_info</code></td><td align="left"></td></tr><tr><td align="left"><code>get_translated_dict</code></td><td align="left"></td></tr><tr><td align="left"><code>get_website_user_home_page</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage" target="_blank" rel="noopener noreferrer">Default Homepage</a></td></tr><tr><td align="left"><code>get_web_pages_with_dynamic_routes</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#web-pages-with-dynamic-routes" target="_blank" rel="noopener noreferrer">Web pages with dynamic routes</a></td></tr><tr><td align="left"><code>has_permission</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#document-permissions" target="_blank" rel="noopener noreferrer">Document Permissions</a></td></tr><tr><td align="left"><code>has_website_permission</code></td><td align="left"></td></tr><tr><td align="left"><code>home_page</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage" target="_blank" rel="noopener noreferrer">Default Homepage</a></td></tr><tr><td align="left"><code>jenv</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#jinja-customization" target="_blank" rel="noopener noreferrer">Jinja Customization</a></td></tr><tr><td align="left"><code>leaderboards</code></td><td align="left"></td></tr><tr><td align="left"><code>look_for_sidebar_json</code></td><td align="left"></td></tr><tr><td align="left"><code>make_email_body_message</code></td><td align="left"></td></tr><tr><td align="left"><code>notification_config</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#notification-configurations" target="_blank" rel="noopener noreferrer">Notification configuration</a></td></tr><tr><td align="left"><code>on_login</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks" target="_blank" rel="noopener noreferrer">Session Hooks</a></td></tr><tr><td align="left"><code>on_logout</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks" target="_blank" rel="noopener noreferrer">Session Hooks</a></td></tr><tr><td align="left"><code>on_session_creation</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks" target="_blank" rel="noopener noreferrer">Session Hooks</a></td></tr><tr><td align="left"><code>override_doctype_class</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#override-doctype-class" target="_blank" rel="noopener noreferrer">Override DocType Class</a></td></tr><tr><td align="left"><code>override_doctype_dashboards</code></td><td align="left"></td></tr><tr><td align="left"><code>override_whitelisted_methods</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#override-whitelisted-methods" target="_blank" rel="noopener noreferrer">Override Whitelisted Methods</a></td></tr><tr><td align="left"><code>ignore_links_on_delete</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#ignore-links-on-delete" target="_blank" rel="noopener noreferrer">Ignore Links on Delete</a></td></tr><tr><td align="left"><code>permission_query_conditions</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#modify-list-query" target="_blank" rel="noopener noreferrer">Modify List Query</a></td></tr><tr><td align="left"><code>portal_menu_items</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#portal-sidebar" target="_blank" rel="noopener noreferrer">Portal Sidebar</a></td></tr><tr><td align="left"><code>required_apps</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#required-apps" target="_blank" rel="noopener noreferrer">Required Apps</a></td></tr><tr><td align="left"><code>role_home_page</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage" target="_blank" rel="noopener noreferrer">Default Homepage</a></td></tr><tr><td align="left"><code>scheduler_events</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#scheduler-events" target="_blank" rel="noopener noreferrer">Scheduler Events</a></td></tr><tr><td align="left"><code>setup_wizard_complete</code></td><td align="left"></td></tr><tr><td align="left"><code>setup_wizard_exception</code></td><td align="left"></td></tr><tr><td align="left"><code>setup_wizard_requires</code></td><td align="left"></td></tr><tr><td align="left"><code>setup_wizard_stages</code></td><td align="left"></td></tr><tr><td align="left"><code>setup_wizard_success</code></td><td align="left"></td></tr><tr><td align="left"><code>signup_form_template</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#signup-form-template" target="_blank" rel="noopener noreferrer">Signup Form Template</a></td></tr><tr><td align="left"><code>sounds</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#sounds" target="_blank" rel="noopener noreferrer">Sounds</a></td></tr><tr><td align="left"><code>standard_portal_menu_items</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#portal-sidebar" target="_blank" rel="noopener noreferrer">Portal Sidebar</a></td></tr><tr><td align="left"><code>standard_queries</code></td><td align="left"></td></tr><tr><td align="left"><code>template_apps</code></td><td align="left"></td></tr><tr><td align="left"><code>translated_languages_for_website</code></td><td align="left"></td></tr><tr><td align="left"><code>translator_url</code></td><td align="left"></td></tr><tr><td align="left"><code>treeviews</code></td><td align="left">DocTypes that use TreeView as the default view (instead of ListView)</td></tr><tr><td align="left"><code>update_website_context</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-context" target="_blank" rel="noopener noreferrer">Website Context</a></td></tr><tr><td align="left"><code>user_privacy_documents</code></td><td align="left"><em>Deprecated</em> (Use <code>user_data_fields</code> hook)</td></tr><tr><td align="left"><code>user_data_fields</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#user-data-protection-&amp;-privacy" target="_blank" rel="noopener noreferrer">User Data Protection &amp; Privacy</a></td></tr><tr><td align="left"><code>web_include_css</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#portal" target="_blank" rel="noopener noreferrer">Portal Assets</a></td></tr><tr><td align="left"><code>web_include_js</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#portal" target="_blank" rel="noopener noreferrer">Portal Assets</a></td></tr><tr><td align="left"><code>website_catch_all</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-404" target="_blank" rel="noopener noreferrer">Website 404</a></td></tr><tr><td align="left"><code>website_clear_cache</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-clear-cache" target="_blank" rel="noopener noreferrer">Website Clear Cache</a></td></tr><tr><td align="left"><code>website_context</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-context" target="_blank" rel="noopener noreferrer">Website Context</a></td></tr><tr><td align="left"><code>website_generators</code></td><td align="left"><em>Deprecated</em> (Use Has Web View in DocType instead)</td></tr><tr><td align="left"><code>website_redirects</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-redirects" target="_blank" rel="noopener noreferrer">Website Redirects</a></td></tr><tr><td align="left"><code>website_route_rules</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#website-route-rules" target="_blank" rel="noopener noreferrer">Website Route Rules</a></td></tr><tr><td align="left"><code>website_user_home_page</code></td><td align="left"><em>Deprecated</em> (Use <code>homepage</code> hook)</td></tr><tr><td align="left"><code>welcome_email</code></td><td align="left"></td></tr><tr><td align="left"><code>write_file_keys</code></td><td align="left"><em>Deprecated</em></td></tr><tr><td align="left"><code>write_file</code></td><td align="left"><a href="https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks" target="_blank" rel="noopener noreferrer">File Hooks</a></td></tr></tbody></table><p>email: <a href="mailto:/johndoe@gmail.com" target="_blank" rel="noopener noreferrer">/johndoe@gmail.com</a></p><p>last updated 1 month ago</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/resource-center/数据库ER图/CRM ER图"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">CRM  ER图</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/resource-center/工具/Chrome插件"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">谷歌插件</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-does-hooks-work" class="table-of-contents__link toc-highlight">How does hooks work?</a></li><li><a href="#how-are-conflicting-hooks-resolved" class="table-of-contents__link toc-highlight">How are conflicting hooks resolved?</a></li><li><a href="#app-meta-data" class="table-of-contents__link toc-highlight">App Meta Data</a></li><li><a href="#javascript--css-assets" class="table-of-contents__link toc-highlight">Javascript / CSS Assets</a><ul><li><a href="#desk-" class="table-of-contents__link toc-highlight">Desk </a></li><li><a href="#portal-" class="table-of-contents__link toc-highlight">Portal </a></li><li><a href="#web-form-" class="table-of-contents__link toc-highlight">Web Form </a></li><li><a href="#page-" class="table-of-contents__link toc-highlight">Page </a></li></ul></li><li><a href="#sounds-" class="table-of-contents__link toc-highlight">Sounds </a></li><li><a href="#install-hooks-" class="table-of-contents__link toc-highlight">Install Hooks </a></li><li><a href="#uninstall-hooks-" class="table-of-contents__link toc-highlight">Uninstall Hooks </a></li><li><a href="#migrate-hooks-" class="table-of-contents__link toc-highlight">Migrate Hooks </a></li><li><a href="#test-hooks-" class="table-of-contents__link toc-highlight">Test Hooks </a></li><li><a href="#file-hooks-" class="table-of-contents__link toc-highlight">File Hooks </a></li><li><a href="#email-hooks-" class="table-of-contents__link toc-highlight">Email Hooks </a></li><li><a href="#extend-bootinfo-" class="table-of-contents__link toc-highlight">Extend Bootinfo </a></li><li><a href="#website-context-" class="table-of-contents__link toc-highlight">Website Context </a></li><li><a href="#website-controller-context-" class="table-of-contents__link toc-highlight">Website Controller Context </a></li><li><a href="#web-pages-with-dynamic-routes-" class="table-of-contents__link toc-highlight">Web pages with dynamic routes </a></li><li><a href="#website-clear-cache-" class="table-of-contents__link toc-highlight">Website Clear Cache </a></li><li><a href="#website-redirects-" class="table-of-contents__link toc-highlight">Website Redirects </a></li><li><a href="#website-route-rules-" class="table-of-contents__link toc-highlight">Website Route Rules </a></li><li><a href="#website-404-" class="table-of-contents__link toc-highlight">Website 404 </a></li><li><a href="#default-homepage-" class="table-of-contents__link toc-highlight">Default Homepage </a></li><li><a href="#portal-sidebar-" class="table-of-contents__link toc-highlight">Portal Sidebar </a></li><li><a href="#brand-html-" class="table-of-contents__link toc-highlight">Brand HTML </a></li><li><a href="#base-template-" class="table-of-contents__link toc-highlight">Base Template </a></li><li><a href="#integrations-" class="table-of-contents__link toc-highlight">Integrations </a><ul><li><a href="#braintree-success-page-" class="table-of-contents__link toc-highlight">Braintree Success Page </a></li></ul></li><li><a href="#calendars-" class="table-of-contents__link toc-highlight">Calendars </a></li><li><a href="#clear-cache-" class="table-of-contents__link toc-highlight">Clear Cache </a></li><li><a href="#default-mail-footer-" class="table-of-contents__link toc-highlight">Default Mail Footer </a></li><li><a href="#session-hooks-" class="table-of-contents__link toc-highlight">Session Hooks </a></li><li><a href="#auth-hooks-" class="table-of-contents__link toc-highlight">Auth Hooks </a></li><li><a href="#fixtures-" class="table-of-contents__link toc-highlight">Fixtures </a></li><li><a href="#document-hooks-" class="table-of-contents__link toc-highlight">Document Hooks </a><ul><li><a href="#modify-list-query-" class="table-of-contents__link toc-highlight">Modify List Query </a></li><li><a href="#document-permissions-" class="table-of-contents__link toc-highlight">Document Permissions </a></li><li><a href="#override-doctype-class-" class="table-of-contents__link toc-highlight">Override DocType Class </a></li><li><a href="#override-form-scripts-" class="table-of-contents__link toc-highlight">Override Form Scripts </a></li><li><a href="#crud-events-" class="table-of-contents__link toc-highlight">CRUD Events </a></li><li><a href="#override-whitelisted-methods-" class="table-of-contents__link toc-highlight">Override Whitelisted Methods </a></li><li><a href="#ignore-links-on-delete-" class="table-of-contents__link toc-highlight">Ignore Links on Delete </a></li><li><a href="#form-timeline-" class="table-of-contents__link toc-highlight">Form Timeline </a></li></ul></li><li><a href="#scheduler-events-" class="table-of-contents__link toc-highlight">Scheduler Events </a><ul><li><a href="#available-events-" class="table-of-contents__link toc-highlight">Available Events </a></li></ul></li><li><a href="#jinja-customization-" class="table-of-contents__link toc-highlight">Jinja Customization </a></li><li><a href="#prevent-auto-cancellation-of-linked-documents-" class="table-of-contents__link toc-highlight">Prevent Auto Cancellation of Linked Documents </a></li><li><a href="#notification-configurations-" class="table-of-contents__link toc-highlight">Notification configurations </a></li><li><a href="#required-apps-" class="table-of-contents__link toc-highlight">Required Apps </a></li><li><a href="#user-data-protection--privacy-" class="table-of-contents__link toc-highlight">User Data Protection &amp; Privacy </a></li><li><a href="#signup-form-template-" class="table-of-contents__link toc-highlight">Signup Form Template </a></li><li><a href="#list-of-available-hooks-" class="table-of-contents__link toc-highlight">List of available hooks </a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://frappeframework.com/docs/v14/user/en/introduction" target="_blank" rel="noopener noreferrer" class="footer__link-item">Frappe文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/V14/">中文文档</a></li><li class="footer__item"><a href="https://docs.erpnext.com/docs/user/manual/en/introduction" target="_blank" rel="noopener noreferrer" class="footer__link-item">英文文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">资源</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gitee.com/yuzelin/erpnext-chinese-docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">码云问题库<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discuss.frappe.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">官方社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://manual.buildwithhussain.dev/introduction/" target="_blank" rel="noopener noreferrer" class="footer__link-item">buildwithhussain<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">博客/代码</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://erpnext.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">ERPNext博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/frappe/erpnext" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tools.erpnext.cc" target="_blank" rel="noopener noreferrer" class="footer__link-item">it-tools<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 MIT </div></div></div></footer></div>
<script src="/assets/js/runtime~main.82cfa04e.js"></script>
<script src="/assets/js/main.8224abd7.js"></script>
</body>
</html>