"use strict";(self.webpackChunkstsinc_docs=self.webpackChunkstsinc_docs||[]).push([[4216],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),s=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},m="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=s(a),h=o,u=m["".concat(l,".").concat(h)]||m[h]||k[h]||r;return a?n.createElement(u,p(p({ref:t},d),{},{components:a})):n.createElement(u,p({ref:t},d))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,p=new Array(r);p[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[m]="string"==typeof e?e:o,p[1]=i;for(var s=2;s<r;s++)p[s]=a[s];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},3107:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>k,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var n=a(7462),o=(a(7294),a(3905));const r={},p="Hooks",i={unversionedId:"\u5b9a\u5236\u6307\u5f15/Hooks",id:"\u5b9a\u5236\u6307\u5f15/Hooks",title:"Hooks",description:"https://frappeframework.com/docs/user/en/python-api/hooks",source:"@site/resource-center/80. \u5b9a\u5236\u6307\u5f15/10-Hooks.md",sourceDirName:"80. \u5b9a\u5236\u6307\u5f15",slug:"/\u5b9a\u5236\u6307\u5f15/Hooks",permalink:"/resource-center/\u5b9a\u5236\u6307\u5f15/Hooks",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"CRM  ER\u56fe",permalink:"/resource-center/\u6570\u636e\u5e93ER\u56fe/CRM ER\u56fe"}},l={},s=[{value:"How does hooks work?",id:"how-does-hooks-work",level:2},{value:"How are conflicting hooks resolved?",id:"how-are-conflicting-hooks-resolved",level:2},{value:"App Meta Data",id:"app-meta-data",level:2},{value:"Javascript / CSS Assets",id:"javascript--css-assets",level:2},{value:"Desk ",id:"desk-",level:3},{value:"Portal ",id:"portal-",level:3},{value:"Web Form ",id:"web-form-",level:3},{value:"Page ",id:"page-",level:3},{value:"Sounds ",id:"sounds-",level:2},{value:"Install Hooks ",id:"install-hooks-",level:2},{value:"Uninstall Hooks ",id:"uninstall-hooks-",level:2},{value:"Migrate Hooks ",id:"migrate-hooks-",level:2},{value:"Test Hooks ",id:"test-hooks-",level:2},{value:"File Hooks ",id:"file-hooks-",level:2},{value:"Email Hooks ",id:"email-hooks-",level:2},{value:"Extend Bootinfo ",id:"extend-bootinfo-",level:2},{value:"Website Context ",id:"website-context-",level:2},{value:"Website Controller Context ",id:"website-controller-context-",level:2},{value:"Web pages with dynamic routes ",id:"web-pages-with-dynamic-routes-",level:2},{value:"Website Clear Cache ",id:"website-clear-cache-",level:2},{value:"Website Redirects ",id:"website-redirects-",level:2},{value:"Website Route Rules ",id:"website-route-rules-",level:2},{value:"Website 404 ",id:"website-404-",level:2},{value:"Default Homepage ",id:"default-homepage-",level:2},{value:"Portal Sidebar ",id:"portal-sidebar-",level:2},{value:"Brand HTML ",id:"brand-html-",level:2},{value:"Base Template ",id:"base-template-",level:2},{value:"Integrations ",id:"integrations-",level:2},{value:"Braintree Success Page ",id:"braintree-success-page-",level:3},{value:"Calendars ",id:"calendars-",level:2},{value:"Clear Cache ",id:"clear-cache-",level:2},{value:"Default Mail Footer ",id:"default-mail-footer-",level:2},{value:"Session Hooks ",id:"session-hooks-",level:2},{value:"Auth Hooks ",id:"auth-hooks-",level:2},{value:"Fixtures ",id:"fixtures-",level:2},{value:"Document Hooks ",id:"document-hooks-",level:2},{value:"Modify List Query ",id:"modify-list-query-",level:3},{value:"Document Permissions ",id:"document-permissions-",level:3},{value:"Override DocType Class ",id:"override-doctype-class-",level:3},{value:"Override Form Scripts ",id:"override-form-scripts-",level:3},{value:"CRUD Events ",id:"crud-events-",level:3},{value:"Override Whitelisted Methods ",id:"override-whitelisted-methods-",level:3},{value:"Ignore Links on Delete ",id:"ignore-links-on-delete-",level:3},{value:"Form Timeline ",id:"form-timeline-",level:3},{value:"Scheduler Events ",id:"scheduler-events-",level:2},{value:"Available Events ",id:"available-events-",level:3},{value:"Jinja Customization ",id:"jinja-customization-",level:2},{value:"Prevent Auto Cancellation of Linked Documents ",id:"prevent-auto-cancellation-of-linked-documents-",level:2},{value:"Notification configurations ",id:"notification-configurations-",level:2},{value:"Required Apps ",id:"required-apps-",level:2},{value:"User Data Protection &amp; Privacy ",id:"user-data-protection--privacy-",level:2},{value:"Signup Form Template ",id:"signup-form-template-",level:2},{value:"List of available hooks ",id:"list-of-available-hooks-",level:2}],d={toc:s},m="wrapper";function k(e){let{components:t,...a}=e;return(0,o.kt)(m,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"hooks"},"Hooks"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/user/en/python-api/hooks"},"https://frappeframework.com/docs/user/en/python-api/hooks")),(0,o.kt)("p",null,'Hooks allow you to "hook" into functionality and events of core parts of the Frappe Framework. This page documents all of the hooks provided by the framework.'),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Jump to list of all ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/user/en/python-api/hooks#list-of-available-hooks"},"available hooks")," in Frappe.")),(0,o.kt)("h2",{id:"how-does-hooks-work"},"How does hooks work?"),(0,o.kt)("p",null,"Hooks are places in the core code that allow an app to override the standard implementation or extend it. Hooks are defined in ",(0,o.kt)("strong",{parentName:"p"},"hooks.py")," of your app."),(0,o.kt)("p",null,"Let's learn by example. Add the following hooks in your app's ",(0,o.kt)("strong",{parentName:"p"},"hooks.py"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'test_string = "value"\ntest_list = ["value"]\ntest_dict = {\n    "key": "value"\n}\n')),(0,o.kt)("p",null,"Now, open the python console by running the command ",(0,o.kt)("inlineCode",{parentName:"p"},"bench --site sitename console")," and run the following lines:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'\u276f bench --site sitename console\nApps in this namespace:\nfrappe, frappe_docs\n\nIn [1]: frappe.get_hooks("test_string")\nOut[1]: ["value"]\n\nIn [2]: frappe.get_hooks("test_dict")\nOut[2]: {"key": ["value"]}\n\nIn [3]: frappe.get_hooks("test_list")\nOut[3]: ["value"]\n')),(0,o.kt)("p",null,"When you call ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.get_hooks"),", it will convert all the values in a list. This means that if the hook is defined in multiple apps, the values will be collected from those apps. This is what enables the cascading nature of hooks."),(0,o.kt)("p",null,"Now, the hook value can be consumed in different ways. For example, for including JS assets using ",(0,o.kt)("inlineCode",{parentName:"p"},"app_include_js"),", all of the values are included. But for overriding whitelisted method, the last value in the list is used."),(0,o.kt)("p",null,"So the implementation of the hook is totally dependent on how the author of the feature intended it to be used."),(0,o.kt)("h2",{id:"how-are-conflicting-hooks-resolved"},"How are conflicting hooks resolved?"),(0,o.kt)("p",null,'Hooks are resolved using "last writer wins" strategy. Last installed app on site will have highest priority over others.'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"When the hook overrides existing behaviour like overriding a class then only overrides from last app will work."),(0,o.kt)("li",{parentName:"ul"},"When the hook extends behaviour then extensions will be applied in order of installation on the site.")),(0,o.kt)("p",null,">",' If you need to change this order you can do so by going to "Installed Applications" page and clicking on "Update Hooks Resolution Order"'),(0,o.kt)("h2",{id:"app-meta-data"},"App Meta Data"),(0,o.kt)("p",null,"These are automatically generated when you create a new app. Most of the time you don't need to change anything here."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_name")," - slugified name of the app"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_title")," - presentable app name"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_publisher")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_description")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_version")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_icon")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"app_color"))),(0,o.kt)("h2",{id:"javascript--css-assets"},"Javascript / CSS Assets"),(0,o.kt)("p",null,"The following hooks allow you to inject static JS and CSS assets in various parts of your site."),(0,o.kt)("h3",{id:"desk-"},"Desk",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#desk"}," ")),(0,o.kt)("p",null,"These hooks allow you to inject JS / CSS in ",(0,o.kt)("inlineCode",{parentName:"p"},"desk.html")," which renders the ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/desk"},"Desk"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# injected in desk.html\napp_include_js = "assets/js/app.min.js"\napp_include_css = "assets/js/app.min.css"\n\n# All of the above support a list of paths too\napp_include_js = ["assets/js/app1.min.js", "assets/js/app2.min.js"]\n')),(0,o.kt)("h3",{id:"portal-"},"Portal",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#portal"}," ")),(0,o.kt)("p",null,"These hooks allow you to inject JS / CSS in ",(0,o.kt)("inlineCode",{parentName:"p"},"web.html")," which renders the ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/portal-pages"},"Portal"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# injected in the web.html\nweb_include_js = "assets/js/app-web.min.js"\nweb_include_css = "assets/js/app-web.min.css"\n# All of the above support a list of paths too\nweb_include_js = ["assets/js/web1.min.js", "assets/js/web2.min.js"]\n')),(0,o.kt)("h3",{id:"web-form-"},"Web Form",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#web-form"}," ")),(0,o.kt)("p",null,"These hooks allow you to add inject static JS and CSS assets in ",(0,o.kt)("inlineCode",{parentName:"p"},"web_form.html")," which is used to render Web Forms. These will work only for Standard Web Forms."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'webform_include_js = {"ToDo": "public/js/custom_todo.js"}\nwebform_include_css = {"ToDo": "public/css/custom_todo.css"}\n')),(0,o.kt)("p",null,">"," For user created Web Forms, you can directly write the script in the form > itself."),(0,o.kt)("h3",{id:"page-"},"Page",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#page"}," ")),(0,o.kt)("p",null,"These hooks allow you to inject JS assets in Standard Desk Pages."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'page_js = {"page_name" : "public/js/file.js"}\n')),(0,o.kt)("p",null,"For e.g., Background Jobs is a standard page that is part of Core module in Frappe Framework. To add custom behaviour in that page you can add a JS file in your custom app ",(0,o.kt)("inlineCode",{parentName:"p"},"custom_app/public/js/custom_background_jobs.js")," and add the following line in your hooks file."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"custom_app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'page_js = {"background_jobs": "public/js/custom_background_jobs.js"}\n')),(0,o.kt)("h2",{id:"sounds-"},"Sounds",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#sounds"}," ")),(0,o.kt)("p",null,"Frappe ships with a set of audio notifications for events like a success action, document submission, error, etc. You can add your own sounds using the ",(0,o.kt)("inlineCode",{parentName:"p"},"sounds")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'sounds = [\n    {"name": "ping", "src": "/assets/app/sounds/ping.mp3", "volume": 0.2}\n]\n')),(0,o.kt)("p",null,"You can play your added sound using the client utility method:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'frappe.utils.play_sound("ping")\n')),(0,o.kt)("h2",{id:"install-hooks-"},"Install Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks"}," ")),(0,o.kt)("p",null,"These hooks allow you to run code before and after installation of your app. For example, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/frappe/erpnext"},"ERPNext")," has these ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/frappe/erpnext/blob/ecfa6344c02b18455637455742202c7fadf1b35d/erpnext/hooks.py#L42-L43"},"defined"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# python module path\nbefore_install = "app.setup.install.before_install"\nafter_install = "app.setup.install.after_install"\nafter_sync = "app.setup.install.after_sync"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/setup/install.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# will run before app is installed on site\ndef before_install():\n    pass\n\n# will run after app is installed on site\ndef after_install():\n    pass\n\n# will run after app fixtures are synced\ndef after_sync():\n    pass\n")),(0,o.kt)("h2",{id:"uninstall-hooks-"},"Uninstall Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#uninstall-hooks"}," ")),(0,o.kt)("p",null,"These hooks allow you to run code before and after uninstallation of your app."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'before_uninstall = "app.setup.uninstall.before_uninstall"\nafter_uninstall = "app.setup.uninstall.after_uninstall"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/setup/uninstall.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# will run before app is uninstalled from site\ndef before_uninstall():\n    pass\n\n# will run after app is uninstalled from site\ndef after_uninstall():\n    pass\n")),(0,o.kt)("h2",{id:"migrate-hooks-"},"Migrate Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#migrate-hooks"}," ")),(0,o.kt)("p",null,"These hooks allow you to run code before and after a migration is run on your site via the command ",(0,o.kt)("inlineCode",{parentName:"p"},"bench --site sitename migrate"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'before_migrate = "app.migrate.before_migrate"\nafter_migrate = "app.migrate.after_migrate"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/migrate.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def after_migrate():\n    # run code after site migration\n    pass\n")),(0,o.kt)("h2",{id:"test-hooks-"},"Test Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#test-hooks"}," ")),(0,o.kt)("p",null,"This hook allows you to run code before tests are run on a site. You can use this hook to add seed data to your database which will be available to your tests."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'before_tests = "app.tests.before_tests"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/migrate.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def before_tests():\n    # add seed data to the database\n    pass\n")),(0,o.kt)("h2",{id:"file-hooks-"},"File Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks"}," ")),(0,o.kt)("p",null,"These hooks allows you to change the implementation of handling user uploaded files."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'before_write_file = "app.overrides.file.before_write"\nwrite_file = "app.overrides.file.write_file"\ndelete_file_data_content = "app.overrides.file.delete_file"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides/file.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# will run before file is written to disk\ndef before_write():\n    pass\n\n# will override the implementation of writing file to disk\n# can be used to upload files to a CDN instead of writing\n# the file to disk\ndef write_file():\n    pass\n\n\n# will override the implementation of deleting file from disk\n# can be used to delete uploaded files from a CDN instead of\n# deleting file from disk\ndef delete_file():\n    pass\n")),(0,o.kt)("h2",{id:"email-hooks-"},"Email Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#email-hooks"}," ")),(0,o.kt)("p",null,"These hooks allows you to change the default email module implementation of sending emails and setting default sender address."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'override_email_send = "app.overrides.email.send"\nget_sender_details = "app.overrides.email.get_sender_details"\n')),(0,o.kt)("p",null,"By default frappe uses the currently logged in users name and id as sender details on all emails. This can be overriden with ",(0,o.kt)("inlineCode",{parentName:"p"},"get_sender_details")," hook. And if you want to extend the email modules functionality by using a thirdy party server or app for sending emails then you can use ",(0,o.kt)("inlineCode",{parentName:"p"},"override_email_send")," hook. This hook will send all the email information (sender, recipient, content(mime)) to a function in custom_app."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides/email.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# will be edited as "John Doe &lt;johndoe@gmail.com&gt;"\ndef get_sender_details():\n    return "John Doe", "johndoe@gmail.com"\n\n# self - EmailQueue object refrence for updating status\ndef send(self, sender, recipient, msg):\n    # smtp or http request\n    self.update_status("Sending")\n')),(0,o.kt)("p",null,">"," Note: You'll have to handle the status change of email queue in your custom app depending on the webhook response you get from your mail provider/server"),(0,o.kt)("h2",{id:"extend-bootinfo-"},"Extend Bootinfo",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#extend-bootinfo"}," ")),(0,o.kt)("p",null,"After a successful login, the Desk is injected with a dictionary of global values called ",(0,o.kt)("inlineCode",{parentName:"p"},"bootinfo"),". The ",(0,o.kt)("inlineCode",{parentName:"p"},"bootinfo")," is available as a global object in Javascript as ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.boot"),"."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"bootinfo")," dict contains a lot of values including:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"System defaults"),(0,o.kt)("li",{parentName:"ul"},"Notification status"),(0,o.kt)("li",{parentName:"ul"},"Permissions"),(0,o.kt)("li",{parentName:"ul"},"User settings"),(0,o.kt)("li",{parentName:"ul"},"Language and timezone info")),(0,o.kt)("p",null,"You can add global values that makes sense for your app via the ",(0,o.kt)("inlineCode",{parentName:"p"},"extend_bootinfo")," hook."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# python module path\nextend_bootinfo = "app.boot.boot_session"\n')),(0,o.kt)("p",null,"The method is called with one argument ",(0,o.kt)("inlineCode",{parentName:"p"},"bootinfo"),", on which you can directly add/update values."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/boot.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def boot_session(bootinfo):\n    bootinfo.my_global_key = "my_global_value"\n')),(0,o.kt)("p",null,"Now, you can access the value anywhere in your client side code."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"console.log(frappe.boot.my_global_key)\n")),(0,o.kt)("h2",{id:"website-context-"},"Website Context",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-context"}," ")),(0,o.kt)("p",null,"When a Portal Page is rendered, a dictionary is built with all of the possible variables that the page might need to render. This dict is also known as ",(0,o.kt)("inlineCode",{parentName:"p"},"context"),". You can use these hooks to add or modify values in this dict."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'website_context = {\n    "favicon": "/assets/app/image/favicon.png"\n}\nupdate_website_context = "app.overrides.website_context"\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"website_context")," hook is a simple dict of key value pairs. Use this hook for simple value overrides."),(0,o.kt)("p",null,"You can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"update_website_context")," hook for more complex scenarios as it allows you to manipulate the context dict in a python method. The method is called with one argument, which is the ",(0,o.kt)("inlineCode",{parentName:"p"},"context")," dict. You can either modify the context directly by mutating it or return a dict that will be merged with ",(0,o.kt)("inlineCode",{parentName:"p"},"context"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def website_context(context):\n    context.my_key = "my_value"\n')),(0,o.kt)("h2",{id:"website-controller-context-"},"Website Controller Context",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-controller-context"}," ")),(0,o.kt)("p",null,"Frappe ships with standard web pages like ",(0,o.kt)("inlineCode",{parentName:"p"},"/404")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"/about"),". If you want to extend the controller context for these pages you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"extend_website_page_controller_context")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'extend_website_page_controller_context = {\n    "frappe.www.404": "app.pages.context_404"\n}\n')),(0,o.kt)("p",null,"The above hook configuration will allow you to extend the context of the 404 page so that you can add your own keys or modify existing ones."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/pages.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def context_404(context):\n    # context of the 404 page\n    context.my_key = "my_value"\n')),(0,o.kt)("h2",{id:"web-pages-with-dynamic-routes-"},"Web pages with dynamic routes",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#web-pages-with-dynamic-routes"}," ")),(0,o.kt)("p",null,"Dynamic routes are the routes with dynamic values in them."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/profile/<name>\n")),(0,o.kt)("p",null,'here "name" is the dynamic part but same profile page is rendered. By default, Frappe supports dynamic routes from documents in "Web Page" doctype. To add more dynamic routes, ',(0,o.kt)("inlineCode",{parentName:"p"},"get_web_pages_with_dynamic_routes")," can be used."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/"),(0,o.kt)("a",{parentName:"p",href:"http://hooks.py/"},(0,o.kt)("strong",{parentName:"a"},"hooks.py"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'get_web_pages_with_dynamic_routes = "script.get_web_pages_with_dynamic_routes"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"script.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def get_web_pages_with_dynamic_routes():\n    return [{\n       "doctype": "Custom Web Page", // Doctype extended from WebsiteGenerator https://frappeframework.com/docs/user/en/guides/portal-development/generators\n       "route": "/profile/<name>",\n       "name": "profile-page" // name of the web view document to render\n    }, ...]\n')),(0,o.kt)("h2",{id:"website-clear-cache-"},"Website Clear Cache",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-clear-cache"}," ")),(0,o.kt)("p",null,"Frappe Framework caches a lot of static web pages for fast subsequent rendering. If you have created web pages that use cached values, and you want to invalidate the cache, this hook is place to do it."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'website_clear_cache = "app.overrides.clear_website_cache"\n')),(0,o.kt)("p",null,"The method is called with one argument ",(0,o.kt)("inlineCode",{parentName:"p"},"path"),". ",(0,o.kt)("inlineCode",{parentName:"p"},"path")," is set when cache is being cleared for one route, and is ",(0,o.kt)("inlineCode",{parentName:"p"},"None")," when cache is cleared for all routes. You need to handle this case if your cache is page specific."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def clear_website_cache(path=None):\n    if path:\n        # clear page related cache\n    else:\n        # clear all cache\n")),(0,o.kt)("h2",{id:"website-redirects-"},"Website Redirects",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-redirects"}," ")),(0,o.kt)("p",null,"Website Redirects allow you to define redirects from one route to another. Frappe will generate a 304 Redirect response when the source URL is requested and redirect to the target URL. You can redirect plain URLs or you can use regex to match your URLs."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'website_redirects = [\n    {"source": "/compare", "target": "/comparison"},\n    {"source": "/docs(/.*)?", "target": "https://docs.tennismart.com/\\1"},\n    {"source": r\'/items/item\\?item_name=(.*)\', "target": \'/items/\\1\', match_with_query_string=True},\n]\n')),(0,o.kt)("p",null,"The above configuration will result in following redirects:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/compare")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"/comparison")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/docs/getting-started")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"https://docs.tennismart.com/getting-started")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/docs/help")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"https://docs.tennismart.com/help")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/items/item?item_name=racket")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"https://docs.tennismart.com/items/racket"))),(0,o.kt)("h2",{id:"website-route-rules-"},"Website Route Rules",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-route-rules"}," ")),(0,o.kt)("p",null,"Website Route Rules allow you to map URLs to custom controllers. This is commonly used to generate clean URLs for pages."),(0,o.kt)("p",null,"Let's say you want to have ",(0,o.kt)("inlineCode",{parentName:"p"},"/projects")," route to display list of projects. This can be done by creating a ",(0,o.kt)("inlineCode",{parentName:"p"},"projects.html")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"projects.py")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"www")," folder."),(0,o.kt)("p",null,"You also want to have ",(0,o.kt)("inlineCode",{parentName:"p"},"/project/<name>")," route to show a project page where name is the dynamic. To do this you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"website_route_rules")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'website_route_rules = [\n    {"from_route": "/projects/&lt;name&gt;", "to_route": "app/projects/project"},\n]\n')),(0,o.kt)("p",null,"Now, you can create your controller files in ",(0,o.kt)("inlineCode",{parentName:"p"},"app/projects")," folder."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/projects/project.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def get_context(context):\n    project_name = frappe.form_dict.name\n    project = frappe.get_doc("Project", project_name)\n    context.project = project\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/projects/project.html")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"<h1>{{ project.title }}</h1>\n<p>{{ project.description }}</p>\n")),(0,o.kt)("h2",{id:"website-404-"},"Website 404",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-404"}," ")),(0,o.kt)("p",null,"Frappe renders a default ",(0,o.kt)("inlineCode",{parentName:"p"},"/404")," route when a page is not found. You can change this using the ",(0,o.kt)("inlineCode",{parentName:"p"},"website_catch_all")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'website_catch_all = "not_found"\n')),(0,o.kt)("p",null,"The above configuration will render ",(0,o.kt)("inlineCode",{parentName:"p"},"/not_found")," when a 404 is occurred. It is upto you to implement the template ",(0,o.kt)("inlineCode",{parentName:"p"},"www/not_found.html")," and controller ",(0,o.kt)("inlineCode",{parentName:"p"},"www/not_found.py"),"."),(0,o.kt)("h2",{id:"default-homepage-"},"Default Homepage",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage"}," ")),(0,o.kt)("p",null,"Homepage is the page which is rendered when you visit the root URL (",(0,o.kt)("inlineCode",{parentName:"p"},"/"),") of your site. There are multiple ways to configure what page is rendered as the default homepage."),(0,o.kt)("p",null,"By default, the homepage is ",(0,o.kt)("inlineCode",{parentName:"p"},"index"),". So, frappe will try to render ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html")," from ",(0,o.kt)("inlineCode",{parentName:"p"},"www")," folder. This can be overridden using the ",(0,o.kt)("inlineCode",{parentName:"p"},"homepage")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'homepage = "homepage"\n')),(0,o.kt)("p",null,"The above configuration will load the ",(0,o.kt)("inlineCode",{parentName:"p"},"www/homepage.html")," as the default homepage."),(0,o.kt)("p",null,"You can also have role based homepage by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"role_home_page")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'role_home_page = {\n    "Customer": "orders",\n    "Supplier": "bills"\n}\n')),(0,o.kt)("p",null,"The above configuration will make ",(0,o.kt)("inlineCode",{parentName:"p"},"/orders")," the default homepage for users with the ",(0,o.kt)("strong",{parentName:"p"},"Customer")," role and ",(0,o.kt)("inlineCode",{parentName:"p"},"/bills")," for users with the ",(0,o.kt)("strong",{parentName:"p"},"Supplier")," role."),(0,o.kt)("p",null,"You can have even more control over the logic by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"get_website_user_home_page")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'get_website_user_home_page = "app.website.get_home_page"\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/website.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def get_home_page(user):\n    if is_projects_user(user):\n        return "projects"\n    if is_partner(user):\n        return "partner-dashboard"\n    return "index"\n')),(0,o.kt)("p",null,">"," If all of these hooks are defined, the ",(0,o.kt)("inlineCode",{parentName:"p"},"get_website_user_home_page")," will have > higher priority over the others, and ",(0,o.kt)("inlineCode",{parentName:"p"},"role_home_page")," will have higher > priority over ",(0,o.kt)("inlineCode",{parentName:"p"},"homepage"),"."),(0,o.kt)("h2",{id:"portal-sidebar-"},"Portal Sidebar",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#portal-sidebar"}," ")),(0,o.kt)("p",null,"Some Portal views are shown with a sidebar with links to quickly jump to pages. These sidebar items can be customized via hooks."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'portal_menu_items = [\n    {"title": "Dashboard", "route": "/dashboard", "role": "Customer"},\n    {"title": "Orders", "route": "/orders", "role": "Customer"},\n]\n')),(0,o.kt)("p",null,"The above configuration will add two sidebar links for users with the role Customer."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://frappeframework.com/files/hooks-portal-menu-items.png",alt:"Portal Sidebar"}),"These sidebar items are hardcoded in your app so they are not customizable from Desk. For e.g., if you want to hide a sidebar link temporarily you will have to make changes in your code."),(0,o.kt)("p",null,"There is another hook called ",(0,o.kt)("inlineCode",{parentName:"p"},"standard_portal_menu_items")," which allows you to do that. The sidebar links set in ",(0,o.kt)("inlineCode",{parentName:"p"},"standard_portal_menu_items")," hook will be synced with the database."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'standard_portal_menu_items = [\n    {"title": "Dashboard", "route": "/dashboard", "role": "Website Manager"},\n    {"title": "Orders", "route": "/orders", "role": "Website Manager"},\n]\n')),(0,o.kt)("p",null,"The above configuration will sync sidebar items to the Portal Settings which can later be edited by any System User."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://frappeframework.com/files/hooks-standard-portal-menu-items.png",alt:"Portal Settings"})),(0,o.kt)("h2",{id:"brand-html-"},"Brand HTML",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#brand-html"}," ")),(0,o.kt)("p",null,"This hook allows you to customize the brand logo in the navbar of your website."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"brand_html = '<div><img src=\"tennismart.png\"/> TennisMart</div>'\n")),(0,o.kt)("p",null,"If the ",(0,o.kt)("inlineCode",{parentName:"p"},"brand_html")," is defined, it will override the default brand html in the navbar. It is not recommended to use hooks to change your brand logo, unless you want to version control it, otherwise you can use Website Settings to change it."),(0,o.kt)("h2",{id:"base-template-"},"Base Template",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#base-template"}," ")),(0,o.kt)("p",null,"When a web page is rendered, it extends ",(0,o.kt)("inlineCode",{parentName:"p"},"templates/base.html")," by default. You can override the base template by overriding the ",(0,o.kt)("inlineCode",{parentName:"p"},"base_template")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'base_template = "app/templates/my_custom_base.html"\n')),(0,o.kt)("p",null,"You can also customize base templates based on routes. For e.g., if you want to use a different base template for all the routes that start with ",(0,o.kt)("inlineCode",{parentName:"p"},"docs/*")," then you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"base_template_map")," hook. The key must be a regex that matches the route. All other routes will fallback to the default base template."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'base_template_map = {\n    r"docs.*": "app/templates/doc_template.html"\n}\n')),(0,o.kt)("h2",{id:"integrations-"},"Integrations",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#integrations"}," ")),(0,o.kt)("p",null,"These hooks allow you to customize behaviour of 3rd-party integrations in Frappe."),(0,o.kt)("h3",{id:"braintree-success-page-"},"Braintree Success Page",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#braintree-success-page"}," ")),(0,o.kt)("p",null,"This hook allows you to override the default redirect URL on successful payment of Braintree transaction."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'braintree_success_page = "app.integrations.braintree_success_page"\n')),(0,o.kt)("p",null,"The method is called with one argument ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," which has the meta data of the payment."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/integrations.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def braintree_success_page(data):\n    # data.reference_doctype\n    # data.reference_docname\n    return "/thank-you"\n')),(0,o.kt)("h2",{id:"calendars-"},"Calendars",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#calendars"}," ")),(0,o.kt)("p",null,"The calendar hook is a list of doctype names which are shown as menu items for quick navigation from the Calendar page in Desk."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'calendars = ["Appointment"]\n')),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://frappeframework.com/files/hooks-event-menu-shortcuts.png",alt:"Event Menu Shortcuts"})),(0,o.kt)("h2",{id:"clear-cache-"},"Clear Cache",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#clear-cache"}," ")),(0,o.kt)("p",null,"This hook allows you to clear your app specific cache values when the global cache is being cleared by frappe."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'clear_cache = "app.cache.clear_cache"\n')),(0,o.kt)("p",null,"You can use this hook to clear your app specific cache. The method is called without any arguments."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/cache.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def clear_cache():\n    frappe.cache().hdel("app_specific_cache")\n')),(0,o.kt)("h2",{id:"default-mail-footer-"},"Default Mail Footer",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#default-mail-footer"}," ")),(0,o.kt)("p",null,"If you want to set the default footer of all the emails that are sent out by Frappe, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"default_mail_footer")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'default_mail_footer = """\n    <div>\n        Sent via <a href="https://tennismart.com" target="_blank">TennisMart</a>\n</div>\n"""\n')),(0,o.kt)("p",null,"Now, all the emails will have ",(0,o.kt)("strong",{parentName:"p"},"Sent via TennisMart")," in the footer."),(0,o.kt)("h2",{id:"session-hooks-"},"Session Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks"}," ")),(0,o.kt)("p",null,"These hooks are triggered over the login lifecycle of a user. ",(0,o.kt)("inlineCode",{parentName:"p"},"on_login")," is triggered immediately after a successful login, ",(0,o.kt)("inlineCode",{parentName:"p"},"on_session_creation")," is triggered after the session is setup, ",(0,o.kt)("inlineCode",{parentName:"p"},"on_logout")," is triggered after the user logs out."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'on_login = "app.overrides.successful_login"\non_session_creation = "app.overrides.allocate_free_credits"\non_logout = "app.overrides.clear_user_cache"\n')),(0,o.kt)("p",null,"The method will be called with one argument ",(0,o.kt)("inlineCode",{parentName:"p"},"login_manager"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def allocate_free_credits(login_manager):\n    # allocate free credits to frappe.session.user\n    pass\n")),(0,o.kt)("h2",{id:"auth-hooks-"},"Auth Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#auth-hooks"}," ")),(0,o.kt)("p",null,"These hooks are triggered during request authentication. Custom headers, Authorization headers can be validated here, user is verified and mapped to the request using ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.set_user()"),". Use ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.request")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.*")," to validate request and map user."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'auth_hooks = ["app.overrides.validate_custom_jwt"]\n')),(0,o.kt)("p",null,"The method will be called during request authentication."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def validate_custom_jwt():\n    # validate jwt from header, verify signature, set user from jwt.\n    pass\n")),(0,o.kt)("p",null,'Use this method to check for incoming request header, verify the header and map the user to the request. If header verification fails DO NOT throw error to continue with other hooks. Unverified request is treated as "Guest" request by default. You may use third party server, shared database or any alternative of choice to verify and map request and user.'),(0,o.kt)("h2",{id:"fixtures-"},"Fixtures",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#fixtures"}," ")),(0,o.kt)("p",null,"Fixtures are database records that are synced using JSON files when you install and update your site."),(0,o.kt)("p",null,"Let's say you want to create a set of categories in the database whenever you install your app. To do that, create the set of categories in your local site, and add the doctype name in the ",(0,o.kt)("inlineCode",{parentName:"p"},"fixtures")," hook."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'fixtures = [\n    # export all records from the Category table\n    "Category"\n]\n')),(0,o.kt)("p",null,"Now, run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"bench --site sitename export-fixtures\n")),(0,o.kt)("p",null,"This command will create a JSON file for each doctype which will contain the data to generate list of records. You can test this by creating a new site and by installing your app on that site."),(0,o.kt)("p",null,"You can also add conditions for exporting records."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'fixtures = [\n    # export all records from the Category table\n    "Category",\n    # export only those records that match the filters from the Role table\n    {"dt": "Role", "filters": [["role_name", "like", "Admin%"]]},\n]\n')),(0,o.kt)("p",null,"Some fields are for internal use only. They will be set and kept up-to-date by the system automatically. These will not get exported: ",(0,o.kt)("inlineCode",{parentName:"p"},"modified_by"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"creation"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"owner"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"idx"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"lft")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"rgt"),". For child table records, the following fields will not get exported: ",(0,o.kt)("inlineCode",{parentName:"p"},"docstatus"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"doctype"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"modified")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"name"),"."),(0,o.kt)("h2",{id:"document-hooks-"},"Document Hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#document-hooks"}," ")),(0,o.kt)("h3",{id:"modify-list-query-"},"Modify List Query",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#modify-list-query"}," ")),(0,o.kt)("p",null,"You can customize how list of records are queried for a DocType by adding custom match conditions using the ",(0,o.kt)("inlineCode",{parentName:"p"},"permission_query_conditions")," hook. This match condition must be a valid WHERE clause fragment for an SQL query."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'permission_query_conditions = {\n    "ToDo": "app.permissions.todo_query",\n}\n')),(0,o.kt)("p",null,"The method is called with a single argument ",(0,o.kt)("inlineCode",{parentName:"p"},"user")," which can be ",(0,o.kt)("inlineCode",{parentName:"p"},"None"),". The method should return a string that is a valid SQL WHERE clause."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/permissions.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def todo_query(user):\n    if not user:\n        user = frappe.session.user\n    # todos that belong to user or assigned by user\n    return "(`tabToDo`.owner = {user} or `tabToDo`.assigned_by = {user})".format(user=frappe.db.escape(user))\n')),(0,o.kt)("p",null,"Now, if you use the ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.db.get_list")," method, your WHERE clause will be appended to the query."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"todos = frappe.db.get_list(\"ToDo\", debug=1)\n\n# output\n'''\nselect `tabToDo`.`name`\nfrom `tabToDo`\nwhere ((`tabToDo`.owner = 'john@doe.com' or `tabToDo`.assigned_by = 'john@doe.com'))\norder by `tabToDo`.`modified` DESC\n'''\n")),(0,o.kt)("p",null,">"," This hook will only affect the result of ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.db.get_list")," method and not > ",(0,o.kt)("inlineCode",{parentName:"p"},"frappe.db.get_all"),"."),(0,o.kt)("h3",{id:"document-permissions-"},"Document Permissions",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#document-permissions"}," ")),(0,o.kt)("p",null,"You can modify the behaviour of ",(0,o.kt)("inlineCode",{parentName:"p"},"doc.has_permission")," document method for any DocType and add custom permission checking logic using the ",(0,o.kt)("inlineCode",{parentName:"p"},"has_permission")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'has_permission = {\n    "Event": "app.permissions.event_has_permission",\n}\n')),(0,o.kt)("p",null,"The method will be passed the ",(0,o.kt)("inlineCode",{parentName:"p"},"doc"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"user")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"permission_type")," as arguments. It should return ",(0,o.kt)("inlineCode",{parentName:"p"},"True")," or a ",(0,o.kt)("inlineCode",{parentName:"p"},"False")," value. If ",(0,o.kt)("inlineCode",{parentName:"p"},"None")," is returned, it will fallback to default behaviour."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/permissions.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def event_has_permission(doc, user=None, permission_type=None):\n    # when reading a document allow if event is Public\n    if permission_type == "read" and doc.event_type == "Public":\n        return True\n\n    # when writing a document allow if event owned by user\n    if permission_type == "write" and doc.owner == user:\n        return True\n\n    return False\n')),(0,o.kt)("h3",{id:"override-doctype-class-"},"Override DocType Class",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#override-doctype-class"}," ")),(0,o.kt)("p",null,"You can override/extend the class for standard doctypes by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"override_doctype_class")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'override_doctype_class = {\n    "ToDo": "app.overrides.todo.CustomToDo"\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/overrides/todo.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"from frappe.desk.doctype.todo.todo import ToDo\n\nclass CustomToDo(ToDo):\n    def on_update(self):\n        self.my_custom_code()\n        super().on_update()\n\n    def my_custom_code(self):\n        pass\n")),(0,o.kt)("p",null,">"," It is recommended that you extend the standard class of the doctype, otherwise > you will have to implement all of the core functionality."),(0,o.kt)("h3",{id:"override-form-scripts-"},"Override Form Scripts",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#override-form-scripts"}," ")),(0,o.kt)("p",null,"You can override/extend ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/api/form#standard-form-scripts"},"Standard Form Scripts")," by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"doctype_js")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'doctype_js = {\n    "ToDo": "public/js/todo.js",\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/public/js/todo.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'frappe.ui.form.on("Todo", {\n    refresh: function(frm) {\n        frm.trigger("my_custom_code");\n    },\n    my_custom_code: function(frm){\n        console.log(frm.doc.name)\n    }\n});\n')),(0,o.kt)("p",null,">"," The events/functions defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"app/public/todo.js")," will extend > those in the standard form script of ",(0,o.kt)("inlineCode",{parentName:"p"},"ToDo")," doctype."),(0,o.kt)("h3",{id:"crud-events-"},"CRUD Events",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#crud-events"}," ")),(0,o.kt)("p",null,"You can hook into various CRUD events of any doctype using the ",(0,o.kt)("inlineCode",{parentName:"p"},"doc_events")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'doc_events = {\n    "*": {\n        # will run after any DocType record is inserted into database\n        "after_insert": "app.crud_events.after_insert_all"\n    },\n    "ToDo": {\n        # will run before a ToDo record is inserted into database\n        "before_insert": "app.crud_events.before_insert_todo",\n    }\n}\n')),(0,o.kt)("p",null,"The method will be passed the doc and the method name as arguments."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/crud_events.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def after_insert_all(doc, method=None):\n    pass\n\ndef before_insert_todo(doc, method=None):\n    pass\n")),(0,o.kt)("p",null,">"," See ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/basics/doctypes/controllers#controller-hooks"},"Controller Hooks")," > for a list of all available hooks."),(0,o.kt)("h3",{id:"override-whitelisted-methods-"},"Override Whitelisted Methods",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#override-whitelisted-methods"}," ")),(0,o.kt)("p",null,"Whitelisted Methods are python methods that are accessible on a REST endpoint and consumed by a client. You can override standard whitelisted methods that are part of the core framework using the ",(0,o.kt)("inlineCode",{parentName:"p"},"override_whitelisted_methods")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'override_whitelisted_methods = {\n    "frappe.client.get_count": "app.whitelisted.custom_get_count"\n}\n')),(0,o.kt)("p",null,"The method should have the same signature as the original method."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/whitelisted.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def custom_get_count(doctype, filters=None, debug=False, cache=False):\n    # your custom implementation of the standard get_count method provided by frappe\n    pass\n")),(0,o.kt)("h3",{id:"ignore-links-on-delete-"},"Ignore Links on Delete",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#ignore-links-on-delete"}," ")),(0,o.kt)("p",null,"To ignore links to specific DocTypes when deleting documents, you can specify them in the ",(0,o.kt)("inlineCode",{parentName:"p"},"ignore_links_on_delete")," hook like so:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'ignore_links_on_delete = ["Communication", "ToDo"]\n')),(0,o.kt)("h3",{id:"form-timeline-"},"Form Timeline",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#form-timeline"}," ")),(0,o.kt)("p",null,"The timeline section of ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/desk#form-view"},"form view")," of a document shows an audit trail of actions performed on that document like views, value changes, comments and related communications, etc."),(0,o.kt)("p",null,"Apart from these standard actions, there might arise a situation where you need to add your own custom actions. You can do this via ",(0,o.kt)("inlineCode",{parentName:"p"},"additional_timeline_content")," hook."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'additional_timeline_content: {\n    # show in each document\'s timeline\n    "*": ["app.timeline.all_timeline"]\n    # only show in ToDo\'s timeline\n    "ToDo": ["app.timeline.todo_timeline"]\n}\n')),(0,o.kt)("p",null,"The method will be passed the doctype and docname as arguments. You can perform queries and return actions related to that document as a list of dicts as shown in the example. Each dict in the list must have a ",(0,o.kt)("inlineCode",{parentName:"p"},"creation")," value which will be used to sort the item in the timeline."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def todo_timeline(doctype, docname):\n    # this method should return a list of dicts\n    return [\n        {\n             # this will be used to sort the content in the timeline\n            "creation": "22-05-2020 18:00:00",\n            # this JS template will be rendered in the timeline\n            "template": "custom_timeline_template",\n            # this data will be passed to the template.\n            "template_data": {"key": "value"},\n        },\n        ...\n    ]\n')),(0,o.kt)("h2",{id:"scheduler-events-"},"Scheduler Events",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#scheduler-events"}," ")),(0,o.kt)("p",null,"You can use Scheduler Events for running tasks periodically in the background using the ",(0,o.kt)("inlineCode",{parentName:"p"},"scheduler_events")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'scheduler_events = {\n    "hourly": [\n        # will run hourly\n        "app.scheduled_tasks.update_database_usage"\n    ],\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/scheduled_tasks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def update_database_usage():\n    pass\n")),(0,o.kt)("p",null,">"," After changing any scheduled events in ",(0,o.kt)("inlineCode",{parentName:"p"},"hooks.py"),", you need to run ",(0,o.kt)("inlineCode",{parentName:"p"},"bench migrate")," for changes to take effect."),(0,o.kt)("h3",{id:"available-events-"},"Available Events",(0,o.kt)("a",{parentName:"h3",href:"https://frappeframework.com/docs/user/en/python-api/hooks#available-events"}," ")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"hourly"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"daily"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"weekly"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"monthly")),(0,o.kt)("p",{parentName:"li"},"These events will trigger every hour, day, week and month respectively.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"hourly_long"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"daily_long"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"weekly_long"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"monthly_long")),(0,o.kt)("p",{parentName:"li"},"Same as above but these jobs are run in the ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/basics/directory-structure#worker_long"},"long worker")," suitable for long running jobs.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"all")),(0,o.kt)("p",{parentName:"li"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"all")," event is triggered every 60 seconds. This can be configured via the ",(0,o.kt)("inlineCode",{parentName:"p"},"scheduler_tick_interval")," key in ",(0,o.kt)("inlineCode",{parentName:"p"},"common_site_config.json"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"cron")),(0,o.kt)("p",{parentName:"li"},"A valid cron string that can be parsed by ",(0,o.kt)("a",{parentName:"p",href:"https://pypi.org/project/croniter/"},"croniter"),"."))),(0,o.kt)("p",null,"Usage Examples:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'scheduler_events = {\n    "daily": [\n        "app.scheduled_tasks.manage_recurring_invoices"\n    ],\n    "daily_long": [\n        "app.scheduled_tasks..take_backups_daily"\n    ],\n    "cron": {\n        "15 18 * * *": [\n            "app.scheduled_tasks..delete_all_barcodes_for_users"\n        ],\n        "*/6 * * * *": [\n            "app.scheduled_tasks..collect_error_snapshots"\n        ],\n        "annual": [\n            "app.scheduled_tasks.collect_error_snapshots"\n        ]\n    }\n}\n')),(0,o.kt)("h2",{id:"jinja-customization-"},"Jinja Customization",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#jinja-customization"}," ")),(0,o.kt)("p",null,"Frappe provides a list of ",(0,o.kt)("a",{parentName:"p",href:"https://frappeframework.com/docs/v14/user/en/api/jinja"},"global utility methods")," in Jinja templates. To add your own methods and filters you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"jinja")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'jinja = {\n    "methods": [\n        "app.jinja.methods",\n        "app.utils.get_fullname"\n    ],\n    "filters": [\n        "app.jinja.filters",\n        "app.utils.format_currency"\n    ]\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/jinja/methods.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"def sum(a, b):\n    return a + b\n\ndef multiply(a, b):\n    return a * b\n")),(0,o.kt)("p",null,">"," If the path is a module path, all the methods in that module will be added."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/utils.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def get_fullname(user):\n    first_name, last_name = frappe.db.get_value("User", user, ["first_name", "last_name"])\n    return first_name + " " + last_name\n\ndef format_currency(value, currency):\n    return currency + " " + str(value)\n')),(0,o.kt)("p",null,"Now, you can use these utilities in your Jinja templates like so:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<h1>Hi, {{ get_fullname(frappe.session.user) }}</h1>\n<p>Your account balance is {{ account_balance | format_currency("INR") }}</p>\n<p>1 + 2 = {{ sum(1, 2) }}</p>\n')),(0,o.kt)("h2",{id:"prevent-auto-cancellation-of-linked-documents-"},"Prevent Auto Cancellation of Linked Documents",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#prevent-auto-cancellation-of-linked-documents"}," ")),(0,o.kt)("p",null,"To prevent documents of a specific DocType from being automatically cancelled on the cancellation of any linked documents you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"auto_cancel_exempted_doctypes")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'auto_cancel_exempted_doctypes = ["Payment Entry"]\n')),(0,o.kt)("p",null,"In the above example, if any document (for e.g Sales Invoice) that is linked with Payment Entry is cancelled, it will skip the auto-cancellation of the linked Payment Entry document."),(0,o.kt)("h2",{id:"notification-configurations-"},"Notification configurations",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#notification-configurations"}," ")),(0,o.kt)("p",null,"The notification configuration hook is used to customize the items shown in the Notification dropdown in Desk. It can be configured by the ",(0,o.kt)("inlineCode",{parentName:"p"},"notification_config")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'notification_config = "app.notification.get_config"\n')),(0,o.kt)("p",null,"The method is called without any arguments."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/notification.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'def get_config():\n    return {\n        "for_doctype": {\n            "Issue": {"status":"Open"},\n            "Issue": {"status":"Open"},\n        },\n        "for_module_doctypes": {\n            "ToDo": "To Do",\n            "Event": "Calendar",\n            "Comment": "Messages"\n        },\n        "for_module": {\n            "To Do": "frappe.core.notifications.get_things_todo",\n            "Calendar": "frappe.core.notifications.get_todays_events",\n            "Messages": "frappe.core.notifications.get_unread_messages"\n        }\n    }\n')),(0,o.kt)("p",null,"The above configuration has three parts:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"for_doctype"),' part of the above configuration marks any "Issue" or "Customer Issue" as unread if its status is Open'),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"for_module_doctypes")," maps doctypes to module's unread count."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"for_module")," maps modules to functions to obtain its unread count. The functions are called without any argument.")),(0,o.kt)("h2",{id:"required-apps-"},"Required Apps",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#required-apps"}," ")),(0,o.kt)("p",null,"When building apps, you might create apps that build on top of other apps. To make sure dependent apps are installed when someone installs your app, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"required_apps")," hook."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'required_apps = ["erpnext"]\n')),(0,o.kt)("p",null,"The above configuration will make sure ",(0,o.kt)("inlineCode",{parentName:"p"},"erpnext")," is installed when someone installs your app."),(0,o.kt)("h2",{id:"user-data-protection--privacy-"},"User Data Protection & Privacy",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#user-data-protection-privacy"}," ")),(0,o.kt)("p",null,"User Data Privacy features like personal data download and personal data deletion come out of the box in Frappe. What constitutes as personal data may be defined by the App publisher in the application's ",(0,o.kt)("inlineCode",{parentName:"p"},"hooks.py")," file as ",(0,o.kt)("inlineCode",{parentName:"p"},"user_data_fields"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"app/hooks.py")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'user_data_fields = [\n    {"doctype": "Access Log"},\n    {"doctype": "Comment", "strict": True},\n    {\n        "doctype": "Contact",\n        "filter_by": "email_id",\n        "rename": True,\n    },\n    {"doctype": "Contact Email", "filter_by": "email_id"},\n    {\n        "doctype": "File",\n        "filter_by": "attached_to_name",\n        "redact_fields": ["file_name", "file_url"],\n    },\n    {"doctype": "Email Unsubscribe", "filter_by": "email", "partial": True},\n]\n')),(0,o.kt)("p",null,"DocTypes that have user data should be mapped under this hook using the above format. Upon data deletion or download requests from users, this hook will be utilized to map over the specified DocTypes. The options available to modify documents are:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"doctype")),(0,o.kt)("td",{parentName:"tr",align:"left"},"DocType that contains user data.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"filter_by")),(0,o.kt)("td",{parentName:"tr",align:"left"},"Docfield to filter the documents by. If unset, defaults to ",(0,o.kt)("inlineCode",{parentName:"td"},"owner"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"partial")),(0,o.kt)("td",{parentName:"tr",align:"left"},"If set, all text fields are parsed and user's full name and username references will be redacted.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"redact_fields")),(0,o.kt)("td",{parentName:"tr",align:"left"},"Fields that have to be redacted. If unspecified, it considers partial data redaction from all text fields.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"rename")),(0,o.kt)("td",{parentName:"tr",align:"left"},"If document name contains user data, set this field to rename document to anonymize it.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"strict")),(0,o.kt)("td",{parentName:"tr",align:"left"},"If set to True, any user data will be redacted from all documents of current DocType. If unset, it defaults to False which means it only filters through documents in which user is the owner.")))),(0,o.kt)("p",null,">"," Note: Personal Data Download only utilizes the doctype and filter_by fields defined in ",(0,o.kt)("inlineCode",{parentName:"p"},"user_data_fields")),(0,o.kt)("p",null,"Related Topics:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://docs.erpnext.com/docs/user/manual/en/setting-up/personal-data-deletion"},"Personal Data Deletion")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://docs.erpnext.com/docs/user/manual/en/setting-up/personal-data-download"},"Personal Data Download"))),(0,o.kt)("h2",{id:"signup-form-template-"},"Signup Form Template",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#signup-form-template"}," ")),(0,o.kt)("p",null,"If you want to add additional fields to the signup form you can use this hook. Create a template file which contains the custom signup form. Pass this template to the custom signup hook."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'signup_form_template = "school/templates/signup-form.html"\n')),(0,o.kt)("p",null,">"," Note: If you want custom fields in signup form, it will require additional fields in the user doctype. You will have to add these fields using fixtures. Also you will have to write your own submit handler for this signup form and a function on the server side which will signup the user. This way you can also write validations for the custom fields you add."),(0,o.kt)("h2",{id:"list-of-available-hooks-"},"List of available hooks",(0,o.kt)("a",{parentName:"h2",href:"https://frappeframework.com/docs/user/en/python-api/hooks#list-of-available-hooks"}," ")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Hook Name"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Explanation"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"additional_timeline_content")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#form-timeline"},"Form Timeline"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"after_install")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks"},"Install Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"after_migrate")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#migrate-hooks"},"Migrate Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"after_sync")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks"},"Install Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"app_include_css")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#desk"},"Desk Assets"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"app_include_js")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#desk"},"Desk Assets"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"app_logo_url")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#app-meta-data"},"App Meta Data"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"app_title")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#app-meta-data"},"App Meta Data"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"auto_cancel_exempted_doctypes")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#prevent-auto-cancellation-of-linked-documents"},"Prevent Auto Cancellation"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"base_template_map")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#base-template"},"Base Template"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"base_template")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#base-template"},"Base Template"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"before_install")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#install-hooks"},"Install Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"before_migrate")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#migrate-hooks"},"Migrate Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"before_tests")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#test-hooks"},"Test Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"before_write_file")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks"},"File Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"bot_parsers")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("em",{parentName:"td"},"Deprecated"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"braintree_success_page")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#braintree-success-page"},"Braintree Success Page"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"brand_html")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#brand-html"},"Brand HTML"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"calendars")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#calendars"},"Calendars"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"clear_cache")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#clear-cache"},"Clear Cache"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"communication_doctypes")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"default_mail_footer")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#default-mail-footer"},"Default Mail Footer"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"delete_file_data_content")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks"},"File Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"doc_events")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#crud-events"},"Document CRUD Events"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"doctype_js")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#override-form-scripts"},"Override Form Scripts"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"domains")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"dump_report_map")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("em",{parentName:"td"},"Deprecated"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"extend_bootinfo")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#extend-bootinfo"},"Extend Bootinfo"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"extend_website_page_controller_context")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-controller-context"},"Website Controller Context"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"filters_config")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"fixtures")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#fixtures"},"Fixtures"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"get_site_info")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"get_translated_dict")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"get_website_user_home_page")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage"},"Default Homepage"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"get_web_pages_with_dynamic_routes")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#web-pages-with-dynamic-routes"},"Web pages with dynamic routes"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"has_permission")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#document-permissions"},"Document Permissions"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"has_website_permission")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"home_page")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage"},"Default Homepage"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"jenv")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#jinja-customization"},"Jinja Customization"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"leaderboards")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"look_for_sidebar_json")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"make_email_body_message")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"notification_config")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#notification-configurations"},"Notification configuration"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"on_login")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks"},"Session Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"on_logout")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks"},"Session Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"on_session_creation")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#session-hooks"},"Session Hooks"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"override_doctype_class")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#override-doctype-class"},"Override DocType Class"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"override_doctype_dashboards")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"override_whitelisted_methods")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#override-whitelisted-methods"},"Override Whitelisted Methods"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"ignore_links_on_delete")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#ignore-links-on-delete"},"Ignore Links on Delete"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"permission_query_conditions")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#modify-list-query"},"Modify List Query"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"portal_menu_items")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#portal-sidebar"},"Portal Sidebar"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"required_apps")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#required-apps"},"Required Apps"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"role_home_page")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#default-homepage"},"Default Homepage"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"scheduler_events")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#scheduler-events"},"Scheduler Events"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"setup_wizard_complete")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"setup_wizard_exception")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"setup_wizard_requires")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"setup_wizard_stages")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"setup_wizard_success")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"signup_form_template")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#signup-form-template"},"Signup Form Template"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"sounds")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#sounds"},"Sounds"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"standard_portal_menu_items")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#portal-sidebar"},"Portal Sidebar"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"standard_queries")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"template_apps")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"translated_languages_for_website")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"translator_url")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"treeviews")),(0,o.kt)("td",{parentName:"tr",align:"left"},"DocTypes that use TreeView as the default view (instead of ListView)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"update_website_context")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-context"},"Website Context"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"user_privacy_documents")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("em",{parentName:"td"},"Deprecated")," (Use ",(0,o.kt)("inlineCode",{parentName:"td"},"user_data_fields")," hook)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"user_data_fields")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#user-data-protection-&-privacy"},"User Data Protection & Privacy"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"web_include_css")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#portal"},"Portal Assets"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"web_include_js")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#portal"},"Portal Assets"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_catch_all")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-404"},"Website 404"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_clear_cache")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-clear-cache"},"Website Clear Cache"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_context")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-context"},"Website Context"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_generators")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("em",{parentName:"td"},"Deprecated")," (Use Has Web View in DocType instead)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_redirects")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-redirects"},"Website Redirects"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_route_rules")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#website-route-rules"},"Website Route Rules"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"website_user_home_page")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("em",{parentName:"td"},"Deprecated")," (Use ",(0,o.kt)("inlineCode",{parentName:"td"},"homepage")," hook)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"welcome_email")),(0,o.kt)("td",{parentName:"tr",align:"left"})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"write_file_keys")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("em",{parentName:"td"},"Deprecated"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"write_file")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("a",{parentName:"td",href:"https://frappeframework.com/docs/user/en/python-api/hooks#file-hooks"},"File Hooks"))))),(0,o.kt)("p",null,"email: ",(0,o.kt)("a",{parentName:"p",href:"mailto:/johndoe@gmail.com"},"/johndoe@gmail.com")),(0,o.kt)("p",null,"last updated 1 month ago"))}k.isMDXComponent=!0}}]);