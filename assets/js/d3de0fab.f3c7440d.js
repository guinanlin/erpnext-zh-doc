"use strict";(self.webpackChunkstsinc_docs=self.webpackChunkstsinc_docs||[]).push([[1345],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),d=o,f=u["".concat(l,".").concat(d)]||u[d]||m[d]||a;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[u]="string"==typeof e?e:o,i[1]=p;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4931:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var r=n(7462),o=(n(7294),n(3905));const a={},i=void 0,p={unversionedId:"\u5b89\u88c5\u8bbe\u7f6e/Centos\u5b89\u88c5",id:"\u5b89\u88c5\u8bbe\u7f6e/Centos\u5b89\u88c5",title:"Centos\u5b89\u88c5",description:"\u6765\u6e90\uff1a https://discuss.frappe.io/t/installing-erpnext-on-centos-7-guide/15708/4",source:"@site/best-practice/10. \u5b89\u88c5\u8bbe\u7f6e/20.Centos\u5b89\u88c5.md",sourceDirName:"10. \u5b89\u88c5\u8bbe\u7f6e",slug:"/\u5b89\u88c5\u8bbe\u7f6e/Centos\u5b89\u88c5",permalink:"/best-practice/\u5b89\u88c5\u8bbe\u7f6e/Centos\u5b89\u88c5",draft:!1,tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u5b89\u88c5\u6307\u5357",permalink:"/best-practice/\u5b89\u88c5\u8bbe\u7f6e/\u5b89\u88c5\u6307\u5357"},next:{title:"\u6982\u5ff5\u7406\u89e3",permalink:"/best-practice/\u5e94\u7528\u5f00\u53d1/\u6982\u5ff5\u7406\u89e3"}},l={},s=[],c={toc:s},u="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u6765\u6e90\uff1a ",(0,o.kt)("a",{parentName:"p",href:"https://discuss.frappe.io/t/installing-erpnext-on-centos-7-guide/15708/4"},"https://discuss.frappe.io/t/installing-erpnext-on-centos-7-guide/15708/4")),(0,o.kt)("p",null,"Centos 7: 3.10.0-693.17.1.el7.x86_64"),(0,o.kt)("p",null,"Date: February 23th 2018."),(0,o.kt)("p",null,"There are other posts related and credits goes to them also:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://discuss.frappe.io/t/basic-frappe-framework-installation-fails/12688"},"Basic Frappe Framework installation fails")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://discuss.frappe.io/t/installtion-of-erpnext-on-centos-6-5/7652/3"},"Installtion of erpnext on centos 6.5 - #3 by axatech01")),(0,o.kt)("li",{parentName:"ul"},"I use this guide to start with: ",(0,o.kt)("a",{parentName:"li",href:"http://comtronic.com.au/install-erpnext-centos7/121"},"How to install ERPNext on Centos7 \u2013 Comtronic Blog 25"))),(0,o.kt)("p",null,"This is what I did to accomplish:"),(0,o.kt)("p",null,"0- Get the CentOs V7 or any but the DVD Core version: CentOS-7-x86_64-Minimal-1511.iso"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Set up everything:")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Language")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Time")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"root Password")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"HardDisk")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"If network is not up and running:"),(0,o.kt)("p",{parentName:"li"},"nmtui (And modify as need it)\nservice network restart (Restart service)\nPing ",(0,o.kt)("a",{parentName:"p",href:"http://google.com/"},"google.com")," (To test Internet connection)"))),(0,o.kt)("p",null,"1- Run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yum erase chrony -y && yum install vim ntp ntpdate telnet deltarpm wget open-vm-tools -y && systemctl enable ntpd && yum update -y && init 6\n")),(0,o.kt)("p",null,"2- Disable CentOS 7 Firewall, modify the file /etc/sysconfig/selinux:"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"cat /etc/selinux/config | sed -e \u201cs/SELINUX=enforcing/SELINUX=disabled/\u201d > /etc/selinux/config2\nmv -f /etc/selinux/config2 /etc/selinux/config\nrm -f /etc/sysconfig/selinux\nln -s /etc/selinux/config /etc/sysconfig/selinux\ninit 6")),(0,o.kt)("p",null,"3- Create directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> mkdir /opt/erpnext\n> cd /opt/erpnext\n")),(0,o.kt)("p",null,"4- Execute command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> wget https://raw.githubusercontent.com/axatec/MIS-ERPNEXT-ScriptInstall/master/setup_frappe.sh\n")),(0,o.kt)("p",null,"6- Execute and replace the word THE-PASSWORD-FOR-THE-MYSQL-SERVER with a password:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"bash setup_frappe.sh --setup-production --mysql-root-password THE-PASSWORD-FOR-THE-MYSQL-SERVER --verbose\n")),(0,o.kt)("p",null,"7- Stop nginx file config:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"service nginx stop\n")),(0,o.kt)("p",null,"8- Modify nginx config file on /etc/nginx/nginx.conf, with the following values:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'user nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n\nevents {\nworker_connections 1024;\n}\n\nhttp {\nlog_format main \'$remote_addr - $remote_user [$time_local] "$request" \'\n\'$status $body_bytes_sent "$http_referer" \'\n\'"$http_user_agent" "$http_x_forwarded_for"\';\n\naccess_log  /var/log/nginx/access.log  main;\n\nsendfile            on;\n#tcp_nopush          on;\ntcp_nodelay         on;\n#keepalive_timeout   65;\ntypes_hash_max_size 2048;\n\ninclude             /etc/nginx/mime.types;\ndefault_type        application/octet-stream;\n\n# Load modular configuration files from the /etc/nginx/conf.d directory.\n# See http://nginx.org/en/docs/ngx_core_module.html#include\n# for more information.\ninclude /etc/nginx/conf.d/*.conf;\nindex   index.html index.htm;\n}\n')),(0,o.kt)("p",null,"9- Then restart nginx service:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> service nginx start\n")),(0,o.kt)("p",null,"10- Modify the default company from site1.local to \u201c",(0,o.kt)("a",{parentName:"p",href:"http://testcompany.com/"},"testcompany.com 4"),"\u201d:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> su frappe\n> cd ~/frappe-bench\n---\x3eDrop existing site...(Mysql password will be required)\n > bench drop-site site1.local\n----\x3eCreate company demo site\n **first create a demo site, this will be the default one\n Create:\n  > bench new-site demo.testcompany.com\n Assign port:\n  > bench set-nginx-port demo.testcompany.com 8080\n----\x3eCreate company production test site\n  > bench new-site production.testcompany.com\n  Install ErpNext:\n   > bench --site production.testcompany.com install-app erpnext\n  Asign Port:\n   > bench set-nginx-port production.testcompany.com 80\n-----\x3eUpdate configs\n  > sudo bench setup production frappe\n")),(0,o.kt)("p",null,"\u2026then, update repository:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> sudo bench update\n")),(0,o.kt)("p",null,"\u2026At the end:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"> exit\n")),(0,o.kt)("p",null,"11- Browse the ",(0,o.kt)("a",{parentName:"p",href:"http://production.testcompany.com/"},"production.testcompany.com 4")," site on port 80 with the IP or URL (",(0,o.kt)("a",{parentName:"p",href:"http://production.testcompany.com/"},"production.testcompany.com 4"),") set on host."),(0,o.kt)("p",null,"Hope everyone find this guide usefull. (Shares and Comments are welcome)."))}m.isMDXComponent=!0}}]);