<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ERPNext Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ERPNext Blog Atom Feed"><title data-react-helmet="true">配置LDAP | ERPNext</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://guinanlin.github.io//docs/V14/ERPNext集成/认证集成/配置LDAP"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="配置LDAP | ERPNext"><meta data-react-helmet="true" name="description" content="LDAP被许多中小组织用于做集中访问控制的管理。 通过设置LDAP的服务， 你能够通过LDAP的认证信息作为账号访问ERPNext。"><meta data-react-helmet="true" property="og:description" content="LDAP被许多中小组织用于做集中访问控制的管理。 通过设置LDAP的服务， 你能够通过LDAP的认证信息作为账号访问ERPNext。"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://guinanlin.github.io//docs/V14/ERPNext集成/认证集成/配置LDAP"><link data-react-helmet="true" rel="alternate" href="https://guinanlin.github.io//docs/V14/ERPNext集成/认证集成/配置LDAP" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://guinanlin.github.io//docs/V14/ERPNext集成/认证集成/配置LDAP" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a39c77e9.css">
<link rel="preload" href="/assets/js/runtime~main.54876c21.js" as="script">
<link rel="preload" href="/assets/js/main.b9908622.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">首页</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/V14/intro">官方文档</a><a class="navbar__item navbar__link" href="/resource/index">实施交付</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" docid="intro" href="/docs/V14/intro">V14</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/V14/ERPNext集成/认证集成/配置LDAP">V14</a></li><li><a class="dropdown__link" href="/docs/V13/intro">V13</a></li></ul></div><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/V14/intro">指南</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">介绍</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">财务</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">ERPNext集成</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">认证集成</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/V14/ERPNext集成/认证集成/配置LDAP">配置LDAP</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: V14</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>配置LDAP</h1></header><p>LDAP被许多中小组织用于做集中访问控制的管理。 通过设置LDAP的服务， 你能够通过LDAP的认证信息作为账号访问ERPNext。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="1-前提-"></a>1. 前提<a href="https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/ldap-integration#1-prerequisites" target="_blank" rel="noopener noreferrer"> </a><a class="hash-link" href="#1-前提-" title="Direct link to heading">#</a></h2><p>为了使用LDAP， 首先要安装 <code>ldap3</code>的Python模块. 首先是要先打开ERPNext实例的主机终端。 </p><p>进入到 <code>frappe-bench</code>目录， 运行：<code>./env/bin/pip install ldap3</code> </p><p>安装完成可以通过如下的方式验证：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">./env/bin/pip freeze | grep ldap3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ldap3==2.9.1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>现在你就可以在ERPNext中启用LDAP服务。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="2-配置ldap-"></a>2. 配置LDAP<a href="https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/ldap-integration#2-setting-up-ldap" target="_blank" rel="noopener noreferrer"> </a><a class="hash-link" href="#2-配置ldap-" title="Direct link to heading">#</a></h2><p>为了配置LDAP，首先需要进入：</p><blockquote><p>首页 &gt; 集成 &gt; LDAP 配置</p></blockquote><p>为了 ERPNext 能够连接到 LDAP， 许多参数都是必须的. 主要包括:</p><ul><li><p>LDAP Server URL: LDAP 服务器地址. 地址的格式 <code>ldap://yourserver:port</code> 或者 <code>ldaps://yourserver:port</code></p></li><li><p>Base Distinguished Name (DN): This is the distinguished name of the user that has permissions to look up user details on your LDAP server. This should be a user that only has read-only permissions on your LDAP Server.</p></li><li><p>Password for Base DN: This is the password for the user above, that is used to look up user details on your LDAP server.</p></li><li><p>Organization Unit of Users: This is the DN of the Organizational Unit that all users in your LDAP server must be part of to be able to log into ERPNext.</p></li><li><p>Default Role on Creation: When the user is created in ERPNext, they will be assigned with this default role, the first time they log in.</p></li><li><p>LDAP Search String: This field allows ERPNext to match the user/email entered in the ERPNext login screen, with the LDAP Server. For example, you could use email address, or username depending on your preference.</p><p>It must be entered in the format: <code>LDAPFIELD={0}</code></p><p>Active Directory username example: <code>sAMAccountName={0}</code></p><p>Open LDAP username example: <code>uid={0}</code></p></li><li><p>LDAP Email Field: Specifies the LDAP field that contains the email address of the user.</p><p>Active Directory and Open LDAP example: <code>mail</code></p></li><li><p>LDAP Username Field: Specifies the LDAP field that contains the username of the user.</p><p>Active Directory example : <code>sAMAccountName</code></p><p>Open LDAP example: <code>uid</code></p></li><li><p>LDAP First Name Field: Specifies the LDAP field that contains the first name of the user.</p><p>Active Directory example: <code>givenName</code></p><p>Open LDAP example: <code>sn</code></p></li></ul><p>There are many other non-mandatory fields that you can use to map your LDAP user fields to the ERPNext user fields. They are:</p><ul><li>Middle Name</li><li>Phone</li><li>Mobile</li></ul><p>Once your settings are correct, you can click the <code>Enabled</code> checkbox at the top. When attempting to enable LDAP, ERPNext will try and connect to the LDAP server to ensure the settings are correct. If it fails, you will not be able to enable LDAP and will receive an error message.</p><p>The error message will indicate the issue that needs to be resolved to continue.</p><p>After setting enabling LDAP, on the login screen, the system enables <strong>Login Via LDAP</strong> option.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="21-ldap-security-"></a>2.1 LDAP Security<a href="https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/ldap-integration#21-ldap-security" target="_blank" rel="noopener noreferrer"> </a><a class="hash-link" href="#21-ldap-security-" title="Direct link to heading">#</a></h3><p>In the LDAP Security section, You have many options to connect securely to your LDAP server.</p><ul><li><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_y2LR" id="ssltls-mode-"></a>SSL/TLS Mode<a href="https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/ldap-integration#ssltls-mode" target="_blank" rel="noopener noreferrer"> </a><a class="hash-link" href="#ssltls-mode-" title="Direct link to heading">#</a></h5><p>Specifies whether you want to start a TLS session on initial connection to the LDAP server.</p></li><li><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_y2LR" id="require-trusted-certificate-"></a>Require Trusted Certificate<a href="https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/ldap-integration#require-trusted-certificate" target="_blank" rel="noopener noreferrer"> </a><a class="hash-link" href="#require-trusted-certificate-" title="Direct link to heading">#</a></h5><p>Specifies if you require a trusted certificate to connect to the LDAP server</p><p>If you are specifying a trusted certificate, you will need to specify the paths to your certificate files. These files are to be placed on your ERPNext server, and the following fields should be an absolute path to the files on your server. The certificate fields are:</p></li><li><p>Path to private Key File</p></li><li><p>Path to Server Certificate</p></li><li><p>Path to CA Certs File</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="22-ldap-group-mappings-"></a>2.2 LDAP Group Mappings<a href="https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/ldap-integration#22-ldap-group-mappings" target="_blank" rel="noopener noreferrer"> </a><a class="hash-link" href="#22-ldap-group-mappings-" title="Direct link to heading">#</a></h3><p>ERPNext also allows you to automatically map multiple LDAP groups to the appropriate ERPNext roles. For example, you may want all of your Accounting employees, to automatically have the Accounts User Role.</p><p>Ensure that you fill out the LDAP Group Field to allow this. This is the LDAP field that is found on a user object in LDAP, that has all of the groups the user is a member of.</p><p>For Active Directory and Open LDAP, this field should be set to <code>memberOf</code>.</p><p>Open LDAP may need this field to be enabled on your LDAP server. Please see examples on the internet for more details.</p><blockquote><p>Note that all ERPNext roles will be checked each time a user logs on and will be removed or added to the user&#x27;s permissions.</p></blockquote><p>In the LDAP Settings area, there are two dropdowns. 1. SSL/TLS Mode - set this to <strong>StartTLS</strong> to connect to your LDAP server using StartTLS. If your LDAP server does not support StartTLS, setting this to StartTLS will result in an error <code>StartTLS is not supported</code>. Check the configuration on your LDAP server if you receive this error. 2. Require Trusted Certificate - if you change this to <strong>Yes</strong> then the certificate provided by the LDAP server must be trusted by the Frappe/ERPNext server. If you would rather use StartTLS with a self-signed (untrusted) certificate, set this to <strong>No</strong>. If you do not use StartTLS, this setting is ignored.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/guinanlin/erpnext-zh-doc/docs/120. ERPNext集成/认证集成/配置LDAP.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/V14/财务/设置和开账/会计分录"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 会计分录</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-前提-" class="table-of-contents__link">1. 前提 </a></li><li><a href="#2-配置ldap-" class="table-of-contents__link">2. 配置LDAP </a><ul><li><a href="#21-ldap-security-" class="table-of-contents__link">2.1 LDAP Security </a></li><li><a href="#22-ldap-group-mappings-" class="table-of-contents__link">2.2 LDAP Group Mappings </a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/V14/intro">中文文档</a></li><li class="footer__item"><a href="https://docs.erpnext.com/docs/v14/user/manual/en/introduction" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>英文文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/erpnext" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discuss.frappe.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>官方社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a href="https://erpnext.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/frappe/erpnext" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 MIT </div></div></div></footer></div>
<script src="/assets/js/runtime~main.54876c21.js"></script>
<script src="/assets/js/main.b9908622.js"></script>
</body>
</html>